<!DOCTYPE html><html lang="ko" mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="[자바 ORM 표준 JPA 프로그래밍-기본편] 다양한 연관관계 매핑" /><meta name="author" content="jeonyoungho" /><meta property="og:locale" content="ko" /><meta name="description" content="본 포스팅은 인프러의 JPA 기본편을 수강하고 정리하는 내용입니다." /><meta property="og:description" content="본 포스팅은 인프러의 JPA 기본편을 수강하고 정리하는 내용입니다." /><link rel="canonical" href="https://jeonyoungho.github.io/posts/15%EB%8B%A4%EC%96%91%ED%95%9C-%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91/" /><meta property="og:url" content="https://jeonyoungho.github.io/posts/15%EB%8B%A4%EC%96%91%ED%95%9C-%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91/" /><meta property="og:site_name" content="Youngho’s Devlog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-10-26T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[자바 ORM 표준 JPA 프로그래밍-기본편] 다양한 연관관계 매핑" /><meta name="twitter:site" content="@jeonyoungho_o" /><meta name="twitter:creator" content="@jeonyoungho" /><meta name="google-site-verification" content="eonGeSiIVfF48EnFoJqakC7h2hUzgqxFNJaxkfPiGr0" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"jeonyoungho"},"dateModified":"2021-10-26T00:00:00+09:00","datePublished":"2021-10-26T00:00:00+09:00","description":"본 포스팅은 인프러의 JPA 기본편을 수강하고 정리하는 내용입니다.","headline":"[자바 ORM 표준 JPA 프로그래밍-기본편] 다양한 연관관계 매핑","mainEntityOfPage":{"@type":"WebPage","@id":"https://jeonyoungho.github.io/posts/15%EB%8B%A4%EC%96%91%ED%95%9C-%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91/"},"url":"https://jeonyoungho.github.io/posts/15%EB%8B%A4%EC%96%91%ED%95%9C-%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91/"}</script><title>[자바 ORM 표준 JPA 프로그래밍-기본편] 다양한 연관관계 매핑 | Youngho's Devlog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Youngho's Devlog"><meta name="application-name" content="Youngho's Devlog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-RF6ZGDWXV1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-RF6ZGDWXV1'); }); </script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5958719204143086" crossorigin="anonymous"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/youngho_employee_pic.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Youngho's Devlog</a></div><div class="site-subtitle font-italic">curios developer</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/jeonyoungho" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/jeonyoungho_o" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['yhjun1000','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>[자바 ORM 표준 JPA 프로그래밍-기본편] 다양한 연관관계 매핑</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"> <ins class="adsbygoogle" style="display:block; margin-top: 30px;" data-ad-client="ca-pub-5958719204143086" data-ad-slot="1982371670" data-ad-format="auto" data-full-width-responsive="true"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[자바 ORM 표준 JPA 프로그래밍-기본편] 다양한 연관관계 매핑</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> jeonyoungho </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Tue, Oct 26, 2021, 12:00 AM +0900" prep="on" > Oct 26, 2021 <i class="unloaded">2021-10-26T00:00:00+09:00</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3578 words">19 min</span></div></div><div class="post-content"><p>본 포스팅은 인프러의 <a href="https://www.inflearn.com/course/ORM-JPA-Basic#">JPA 기본편</a>을 수강하고 정리하는 내용입니다.</p><hr /><h1 id="연관관계-매핑시-고려사항-3가지">연관관계 매핑시 고려사항 3가지</h1><ul><li>다중성<li>단방향, 양방향<li>연관관계의 주인</ul><h2 id="다중성">다중성</h2><ul><li>다대일: @ManyToOne<li>일대다: @OneToMany<li>일대일: @OneToOne<li>다대다: @ManyToMany</ul><p>위의 관점이 헤깔릴땐 대칭적인 관점으로 보면 쉽다.</p><p>일대일의 반대는 일대일, 다대다의 반대는 다대다</p><p>일대다의 반대는 다대일, 다대일의 반대는 일대다</p><blockquote><p><strong>Note</strong>: 사실 다대다는 실무에서 쓰면 안되는 것이다.</p></blockquote><h2 id="단방향-양방향">단방향, 양방향</h2><ul><li>테이블<ul><li>외래 키 하나로 양쪽 조인 가능<li>사실 방향이라는 개념이 없음</ul><li>객체<ul><li>참조용 필드가 있는 쪽으로만 참조 가능<li>한쪽만 참조하면 단방향<li>양쪽이 서로 참조하면 양방향 (사실은 단방향이 2개 있는 것다. 이렇게 접근해야 밑에 있는 연관관계의 주인에 대해 이해할 수 있다)</ul></ul><h2 id="연관관계의-주인">연관관계의 주인</h2><ul><li>테이블은 외래 키 하나로 두 테이블이 연관관계를 맺음<li>객체 양방향 관계는 A-&gt;B, B-&gt;A 처럼 참조가 2군데<li>객체 양방향 관계는 참조가 2군데 있음. 둘중 테이블의 외래 키를 관리할 곳을 지정해야함<li><code class="language-plaintext highlighter-rouge">연관관계의 주인: 외래 키를 관리하는 참조</code><li><code class="language-plaintext highlighter-rouge">주인의 반대편: 외래 키에 영향을 주지 않음, 단순 조회만 가능</code></ul><h1 id="다대일-n1">다대일 [N:1]</h1><h2 id="다대일-단방향">다대일 단방향</h2><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/44339530/138822369-4695af1e-c336-4d35-8ec8-8dfe726bf3ea.png" alt="image" /></p><h2 id="다대일-단방향-정리">다대일 단방향 정리</h2><ul><li>가장 많이 사용하는 연관관계<li><code class="language-plaintext highlighter-rouge">다대일</code>의 반대는 <code class="language-plaintext highlighter-rouge">일대다</code></ul><h2 id="다대일-양방향">다대일 양방향</h2><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/44339530/138822427-51c82738-b37f-4bc6-971f-a59311f4bae7.png" alt="image" /></p><h2 id="다대일-양방향-정리">다대일 양방향 정리</h2><ul><li>외래 키가 있는 쪽이 연관관계의 주인<li>양쪽을 서로 참조하도록 개발</ul><h1 id="일대다-1n">일대다 [1:N]</h1><p>먼저 위의 모델(일대다)은 권장하진 않지만 표준 스펙에서 지원은 하는 모델이다.</p><h2 id="일대다-단방향">일대다 단방향</h2><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/44339530/138823234-e39e0d9a-94d2-46be-a79e-823a35ac2369.png" alt="image" /></p><ul><li>Team은 Member를 아는데 Member는 Team을 알고 싶지 않은 상황이다.<li>DB입장에선 무조건 다(Member)쪽에 외래키가 들어가게 된다. DB설계상 절대적이다.<li>그러면 Team의 <code class="language-plaintext highlighter-rouge">List&lt;Member&gt;</code> 값을 바꼈을때 다른 테이블인 Member 테이블에 업데이트를 쳐줘야 한다.<li>이게 일대다 단방향 매핑이다.</ul><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
</pre><td class="rouge-code"><pre>@Entity
public class Team {

    @Id
    @GeneratedValue
    @Column(name = "TEAM_ID")
    private Long id;

    private String name;

    @OneToMany
    @JoinColumn(name = "TEAM_ID")
    private List&lt;Member&gt; members = new ArrayList&lt;ㅠ&gt;();
    ....
}

@Entity
public class Member {

    @Id
    @GeneratedValue
    @Column(name = "MEMBER_ID")
    private Long id;

    @Column(name = "USERNAME")
    private String username;

    ...
}

public class JpaMain {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("hello");
    
        EntityManager em = emf.createEntityManager();
       
        EntityTransaction tx = em.getTransaction();
        tx.begin();

        try {
            Member member = new Member();
            member.setUsername("member1");
            em.persist(member);

            Team team = new Team();
            team.setName("teamA");
            team.getMembers().add(member); // team 엔티티를 저장하는데 member 테이블의 update 쿼리를 날림

            em.persist(team);

            tx.commit();
        } catch (Exception e) {
            tx.rollback();
        } finally {
            em.close();
        }

        emf.close();
    }
}
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">team.getMembers().add(member);</code> 호출시 추가적인 업데이트 쿼리가 발생한다는 성능상 단점이 있다.(치명적인 단점이라 하긴 그렇다.)</p><p><b>하지만 더 심각한점은 실무에서 테이블 수십개가 엮어서 돌아가는 상황에서 일대다 로 설계하면 운영이 힘들어진다. 그래서 이전과 똑같이 다대일 단방향 관계에 필요하면 양방향 추가하는 방식으로 접근하는게 좋다.</b></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre>Hibernate: 
    /* insert hellojpa.Member
        */ insert 
        into
            Member
            (USERNAME, MEMBER_ID) 
        values
            (?, ?)
Hibernate: 
    /* insert hellojpa.Team
        */ insert 
        into
            Team
            (name, TEAM_ID) 
        values
            (?, ?)
Hibernate: 
    /* create one-to-many row hellojpa.Team.members */ update
        Member 
    set
        TEAM_ID=? 
    where
        MEMBER_ID=?
</pre></table></code></div></div><p><b>실제 위처럼 쿼리가 호출될텐데 insert를 두 번 호출하고 update를 한 번 호출한다? 오해 및 실수의 소지가 있다. Member에서 Team으로 참조가 필요없다하더라도 약간의 손해를 감수하며 다대일 양방향으로 가면 비슷하게 쓸수 있어 좋다.</b></p><h2 id="일대다-단방향-정리">일대다 단방향 정리</h2><ul><li>일대다 단방향은 일대다(1:N)에서 <b>일(1)이 연관관계의 주인</b><li>테이블 일대다 관계는 항상 <b>다(N) 쪽에 외래 키가 있음</b><li><b>객체와 테이블의 차이 때문에 반대편 테이블의 외래 키를 관리하는 특이한 구조 =&gt; 권장X </b><li><code class="language-plaintext highlighter-rouge">@JoinColumn</code>을 꼭 사용해야 함. 그렇지 않으면 조인 테이블 방식을 사용함(중간에 테이블을 하나 추가함 =&gt; JoinTable)<ul><li>추가적으로 <code class="language-plaintext highlighter-rouge">@JoinColumn</code>의 name속성은 무조건 넣어주는게 좋다. 시스템에서 알아서 넣긴하지만 굉장히 지저분하다.</ul><li><code class="language-plaintext highlighter-rouge">일대다 단방향 매핑의 단점</code><ul><li><b>엔티티가 관리하는 외래 키가 다른 테이블에 있음</b><li><b>연관관계 관리를 위해 추가로 UPDATE SQL 실행</b></ul><li><b>결론적으로 일대다 단방향 매핑보다는 다대일 양방향 매핑을 사용하자! (설계가 덜 깔끔해지는걸 감수하더라도 참조를 하나 더 넣자)</b></ul><h2 id="일대다-양방향">일대다 양방향</h2><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/44339530/138826777-f6ed00bf-4881-4577-a03b-02d7df674110.png" alt="image" /></p><p><b>Member에서 Team으로 조회하고자 하면 약간의 야매로 가능하다.(스펙상 되는건 아님)</b></p><p>다쪽에 <code class="language-plaintext highlighter-rouge">@JoinColumn(insertable = false, updatable = false)</code> 으로 활용하자.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre>@Entity
public class Member {

    @Id
    @GeneratedValue
    @Column(name = "MEMBER_ID")
    private Long id;

    @Column(name = "USERNAME")
    private String username;

    @ManyToOne
    @JoinColumn(insertable = false, updatable = false) // 읽기 전용이 되어버림
    private Team team;

    ...
}
</pre></table></code></div></div><h2 id="일대다-양방향-정리">일대다 양방향 정리</h2><ul><li><b>이런 매핑은 공식적으로 존재X</b><li><code class="language-plaintext highlighter-rouge">@JoinColumn(insertable=false, updatable=false)</code><li><code class="language-plaintext highlighter-rouge">읽기 전용 필드</code>를 사용해서 양방향 처럼 사용하는 방법<li><b>결론은 다대일 양방향을 사용하자</b><ul><li>설계라는게 테이블 한 두개 있는 것도 아니고 결국 단순해야 한다. 복잡하게 들어가면 다 힘들어진다.</ul></ul><h1 id="일대일-11">일대일 [1:1]</h1><h2 id="일대일-관계">일대일 관계</h2><ul><li>일대일 관계는 그 반대도 일대일<li><b>주 테이블이나 대상 테이블 중에 외래 키 선택 가능</b><ul><li>주 테이블에 외래 키<li>대상 테이블에 외래 키</ul><li><b>외래 키에 데이터베이스 유니크(UNI) 제약조건 추가</b></ul><h2 id="일대일-주-테이블에-외래-키-단방향">일대일: 주 테이블에 외래 키 단방향</h2><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/44339530/138827977-56c6f183-3a82-4da4-8add-6aa3d7e0bae5.png" alt="image" /></p><ul><li><code class="language-plaintext highlighter-rouge">Member</code> 를 주테이블이라고 생각 (둘 중 어디에 넣어도 됨)</ul><p>여기서 DBA입장에서의 딜레마와 개발자 입장에서의 딜레마가 존재한다.</p><p>DBA 입장에서의 딜레마는 다음과 같다. Member와 Locker 어디든 외래키를 둬도 문제는 없다. 하지만 장기적인 미래의 관점에서 나중에 하나의 Member이 여러 개의 Locker를 가질 수 있다고 할 때 Locker에 두는게 여러 개를 insert할 수 있어 편리하다. 만약 Member에 외래키가 있다면 코드나 기능을 많이 변경해야 될 것이다. 반대로 하나의 Locker가 여러 개의 Member를 가질 수 있다면 반대가 될 것이다.</p><p>개발자 입장에서의 딜레마는 다음과 같다. Member의 Locker가 있는게 성능도 그렇고 여러 가지로 유리하다. 예를 들어 Member는 거의 필수적으로 조회되는데 조인없이 DB쿼리 한 방으로 Member를 가져왔을 때 Locker가 있냐 없냐를 판단하는게 쉬워진다. DBA 의 선호에 맞춰 잘 가져가면 된다.</p><h2 id="일대일-주-테이블에-외래-키-단방향-정리">일대일: 주 테이블에 외래 키 단방향 정리</h2><p>다대일(@ManyToOne) 단방향 매핑과 유사</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre>@Entity
public class Member {

    @Id
    @GeneratedValue
    @Column(name = "MEMBER_ID")
    private Long id;

    @Column(name = "USERNAME")
    private String username;

    @ManyToOne
    @JoinColumn(insertable = false, updatable = false)
    private Team team;

    @OneToOne
    @JoinColumn(name = "LOCKER_ID")
    private Locker locker;

    ...
}
</pre></table></code></div></div><h2 id="일대일-주-테이블에-외래-키-양방향">일대일: 주 테이블에 외래 키 양방향</h2><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/44339530/138828264-03e67a38-9223-4fdb-a629-0d5ef37e56ea.png" alt="image" /></p><p>위의 Member클래스가 있다고 할 때 반대편 Locker에 Member를 가리킬 필드를 추가해준다.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre>@Entity
public class Locker {
    @Id
    @GeneratedValue
    private Long id;

    private String name;

    @OneToOne(mappedBy = "locker")
    private Member member;
}
</pre></table></code></div></div><h2 id="일대일-주-테이블에-외래-키-양방향-정리">일대일: 주 테이블에 외래 키 양방향 정리</h2><ul><li>다대일 양방향 매핑 처럼 <code class="language-plaintext highlighter-rouge">외래 키가 있는 곳이 연관관계의 주인</code><li>반대편은 mappedBy 적용</ul><h2 id="일대일-대상-테이블에-외래-키-단방향">일대일: 대상 테이블에 외래 키 단방향</h2><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/44339530/138829328-75779ec9-17ad-495b-9c09-6ccc59b7f05d.png" alt="image" /></p><p>반대쪽 사이드에 <code class="language-plaintext highlighter-rouge">MEMBER_ID</code> 는 관리 할 수 없다. 지원도 안되고 방법이 없다.</p><h2 id="일대일-대상-테이블에-외래-키-단방향-정리">일대일: 대상 테이블에 외래 키 단방향 정리</h2><ul><li><b>단방향 관계는 JPA 지원X</b><li>양방향 관계는 지원</ul><h2 id="일대일-대상-테이블에-외래-키-양방향">일대일: 대상 테이블에 외래 키 양방향</h2><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/44339530/138829580-4a5d2689-673f-465a-9f00-08510c1f96b8.png" alt="image" /></p><p>Locker의 Member 필드를 연관 관계의 주인으로 잡아서 매핑해버리면 된다.</p><p>사실 일대일 주 테이블에 외래 키 양방향과 매핑 방법은 같다.</p><blockquote><p><strong>Note</strong>: 일대일 관계는 내 엔티티의 외래 키를 직접 관리해야 한다.</p></blockquote><h2 id="일대일-정리">일대일 정리</h2><ul><li><code class="language-plaintext highlighter-rouge">주 테이블에 외래 키</code><ul><li>주 객체가 대상 객체의 참조를 가지는 것 처럼 주 테이블에 외래 키를 두고 대상 테이블을 찾음<li>객체지향 개발자 선호<li>JPA 매핑 편리<li>장점: 주 테이블만 조회해도 대상 테이블에 데이터가 있는지 확인 가능<li>단점: 값이 없으면 외래 키에 null 허용</ul><li><code class="language-plaintext highlighter-rouge">대상 테이블에 외래 키</code><ul><li>대상 테이블에 외래 키가 존재<li>전통적인 데이터베이스 개발자 선호<li>장점: 주 테이블과 대상 테이블을 일대일에서 일대다 관계로 변경할 때 테이블 구조 유지<li>단점: 프록시 기능의 한계로 <b>지연 로딩으로 설정해도 항상 즉시 로딩됨</b>(프록시는 뒤에서 설명)<ul><li><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/44339530/138829580-4a5d2689-673f-465a-9f00-08510c1f96b8.png" alt="image" /><li>Member를 조회한다해도 어차피 Locker테이블을 조인으로 조회해야 Locker테이블을 채울지 말지를 결정짓게 된다. 그러므로 JPA는 한 번 조인으로 조회 후 즉시 로딩하게 된다.<li>JPA가 <code class="language-plaintext highlighter-rouge">Member의 Locker 멤버 변수</code>에 프록시를 넣거나 Null을 넣거나 판단을 해야하는데 무조건 조인을 통해 조회해야만 하므로 무조건 즉시로딩하게 된다.</ul></ul></ul><h1 id="다대다-nm">다대다 [N:M]</h1><ul><li><code class="language-plaintext highlighter-rouge">실무에서 안쓰는걸 추천하다.</code><li>관계형 데이터베이스는 정규화된 테이블 2개로 다대다 관계를 표현할 수 없음<li><code class="language-plaintext highlighter-rouge">연결(중간) 테이블을 추가</code>해서 일대다, 다대일 관계로 풀어내야함</ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/44339530/138832902-d00f2a9c-8295-4fc2-b065-eee3155dcb4c.png" alt="image" /></p><p><b>객체는 컬렉션을 사용해서 객체 2개로 다대다 관계 가능하다.</b></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/44339530/138833366-a2025625-c77b-4bbf-9495-430c900f5f9c.png" alt="image" /></p><ul><li>@ManyToMany 사용<li>@JoinTable로 연결 테이블 지정<li>다대다 매핑: 단방향, 양방향 가능</ul><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre><td class="rouge-code"><pre>@Entity
public class Member {

    @Id
    @GeneratedValue
    @Column(name = "MEMBER_ID")
    private Long id;

    @ManyToMany
    @JoinTable(name = "MEMBER_PRODUCT")
    private List&lt;Product&gt; products = new ArrayList&lt;&gt;();
    ...
}

@Entity
public class Product {
    @Id
    @GeneratedValue
    private Long id;

    private String name;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}
</pre></table></code></div></div><p>만약 양방향으로 변경한다하면 아래와 같이 Product 클래스에 Member에 대한 참조를 추가해주면 된다.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre>@Entity
public class Product {
    @Id
    @GeneratedValue
    private Long id;

    private String name;

    @ManyToMany(mappedBy = "products")
    private List&lt;Member&gt; members = new ArrayList&lt;b&gt;();
    ...
}
</pre></table></code></div></div><h2 id="다대다-매핑의-한계중요">다대다 매핑의 한계(중요!)</h2><p><b>편리해 보이지만 실무에서 사용 하지 않는 2가지 이유가 있다.</b></p><h3 id="1-매핑정보만-들어가고-추가적인-데이터를-넣을-수-없음">1) 매핑정보만 들어가고 추가적인 데이터를 넣을 수 없음</h3><ul><li><b>연결 테이블이 단순히 연결만 하고 끝나지 않음</b><li><b>주문시간, 수량 같은 데이터가 들어올 수 있는데 이런 데이터들을 쓸수가 없음</b></ul><h3 id="2-중간-테이블이-숨겨져-있기에-내가-생각하지-못한-쿼리가-이상하게-나간다">2) 중간 테이블이 숨겨져 있기에 내가 생각하지 못한 쿼리가 이상하게 나간다</h3><ul><li>Member랑 Product를 조회할려면 쿼리가 중간 테이블이 들어가고 조인이 되서 나와야하는데 예상치도 쿼리가 나올 것이다..</ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/44339530/138834283-40642c21-0129-4de8-b3e1-95d48e333ecf.png" alt="image" /></p><h2 id="다대다-한계-극복중요">다대다 한계 극복(중요!)</h2><ul><li><b>연결 테이블용 엔티티 추가(연결 테이블을 엔티티로 승격)</b><li><b>@ManyToMany -&gt; @OneToMany, @ManyToOne</b></ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/44339530/138835187-9cc764b2-495e-4c0c-8044-3a3fb79321be.png" alt="image" /></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
</pre><td class="rouge-code"><pre>@Entity
public class Member {

    @Id
    @GeneratedValue
    @Column(name = "MEMBER_ID")
    private Long id;

    @Column(name = "USERNAME")
    private String username;

    @OneToMany(mappedBy = "member")
    private List&lt;MemberProduct&gt; memberProducts = new ArrayList&lt;&gt;();

    ...
}

@Entity
public class Product {
    @Id
    @GeneratedValue
    private Long id;

    private String name;

    @OneToMany(mappedBy = "product")
    private List&lt;MemberProduct&gt; memberProdcuts = new ArrayList&lt;&gt;();

    ...
}

@Entity
public class MemberProduct {

    @Id
    @GeneratedValue
    private Long id;

    @ManyToOne
    @JoinColumn(name ="MEMBER_ID")
    private Member member;

    @ManyToOne
    @JoinColumn(name ="PRODUCT_ID")
    private Product product;

    private int count;
    private int price;
    
    private LocalDateTime orderDatetime;
}
</pre></table></code></div></div><h1 id="추가적으로">추가적으로</h1><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/44339530/138836369-5e7955a5-a3d1-4936-b390-c7d38b8fda12.png" alt="image" /></p><p>위의 이미지처럼 <code class="language-plaintext highlighter-rouge">MEMBER_ID</code> 와 <code class="language-plaintext highlighter-rouge">PRODUCT_ID</code> 두 개로 PK를 잡을 수도 있다. 하지만 왠만하면 별도의 pk를 별도로 생성할 것을 추천한다. JPA 에서 복합키를 사용하면 Composite아이디를 별도로 만들어줘야하는데 조금 귀찮다. 그런걸 떠나서라도 DB설계 관점에서 새로운 id를 따는게 장단이 있다.</p><p>애플리케이션을 계속 개발하다보면 id라는게 어디 종속되는식으로 딱딱 걸리면 시스템을 유연성있게 다루기 쉽지 않아진다.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/backend/'>Backend</a>, <a href='/categories/jpa/'>JPA</a>, <a href='/categories/%EC%9D%B8%ED%94%84%EB%9F%B0jpa-%EA%B8%B0%EB%B3%B8%ED%8E%B8/'>인프런JPA-기본편</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/java/" class="post-tag no-text-decoration" >java</a> <a href="/tags/spring/" class="post-tag no-text-decoration" >spring</a> <a href="/tags/jpa/" class="post-tag no-text-decoration" >jpa</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[자바 ORM 표준 JPA 프로그래밍-기본편] 다양한 연관관계 매핑 - Youngho's Devlog&url=https://jeonyoungho.github.io/posts/15%EB%8B%A4%EC%96%91%ED%95%9C-%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[자바 ORM 표준 JPA 프로그래밍-기본편] 다양한 연관관계 매핑 - Youngho's Devlog&u=https://jeonyoungho.github.io/posts/15%EB%8B%A4%EC%96%91%ED%95%9C-%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=[자바 ORM 표준 JPA 프로그래밍-기본편] 다양한 연관관계 매핑 - Youngho's Devlog&url=https://jeonyoungho.github.io/posts/15%EB%8B%A4%EC%96%91%ED%95%9C-%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-5958719204143086" data-ad-slot="1982371670" data-ad-format="auto" data-full-width-responsive="true"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script> <ins class="adsbygoogle" style="display:block" data-ad-format="autorelaxed" data-ad-client="ca-pub-5958719204143086" data-ad-slot="5918543412"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script> <script src="https://utteranc.es/client.js" repo="jeonyoungho/jeonyoungho.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async> </script></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Kafka-%EB%A9%94%EC%8B%9C%EC%A7%80-%EC%A0%84%EB%8B%AC-%EB%B3%B4%EC%9E%A5-%EB%B0%A9%EC%8B%9D/">Kafka 메시지 전달 보장 방식</a><li><a href="/posts/Transactional-Outbox-%ED%8C%A8%ED%84%B4/">Transactional Outbox 패턴</a><li><a href="/posts/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EC%9D%B8%EB%8D%B1%EC%8A%A4-%EC%A1%B0%EA%B0%81%ED%99%94/">데이터베이스 인덱스 조각화(Fragmentation)</a><li><a href="/posts/Kafka-DeadLetter-%EA%B4%80%EB%A6%AC/">Kafka DeadLetter 관리</a><li><a href="/posts/Redis-%ED%8A%B9%EC%A7%95/">Redis 특징</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/jpa/">jpa</a> <a class="post-tag" href="/tags/effectivejava/">effectivejava</a> <a class="post-tag" href="/tags/react/">react</a> <a class="post-tag" href="/tags/frontend/">frontend</a> <a class="post-tag" href="/tags/es6/">es6</a> <a class="post-tag" href="/tags/velopert/">velopert</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/poiemaweb/">poiemaweb</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/1%EA%B0%95%EC%A2%8C-%EC%86%8C%EA%B0%9C/"><div class="card-body"> <span class="timeago small" > Oct 22, 2021 <i class="unloaded">2021-10-22T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[자바 ORM 표준 JPA 프로그래밍-기본편] 강좌 소개</h3><div class="text-muted small"><p> 본 포스팅은 인프러의 JPA 기본편을 수강하고 정리하는 내용입니다. JPA? - Java Persistance API Jdbc -&gt; MyBatis, JdbcTemplate -&gt; JPA 과거에는 JdbcTemplate이나 MyBatis를 통해 sql을 한땀한땀 작성하여 개발을 했으나 이는 개발 생산성이 뒤떨어진다. JPA를 사용하면 ...</p></div></div></a></div><div class="card"> <a href="/posts/2SQL-%EC%A4%91%EC%8B%AC%EC%A0%81%EC%9D%B8-%EA%B0%9C%EB%B0%9C%EC%9D%98-%EB%AC%B8%EC%A0%9C%EC%A0%90/"><div class="card-body"> <span class="timeago small" > Oct 22, 2021 <i class="unloaded">2021-10-22T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[자바 ORM 표준 JPA 프로그래밍-기본편] SQL 중심적인 개발의 문제점</h3><div class="text-muted small"><p> 본 포스팅은 인프러의 JPA 기본편을 수강하고 정리하는 내용입니다. 대부분의 기업들은 객체 지향 언어(java, scala)를 사용한다. 또한 DB로는 관계형 DB를 많이 사용하고 있다. 그래서 지금 시대는 객체를 관계형 DB에 관리하는 시대이다. 문제는 애플리케이션은 객체 지향 개발하면서 하는데 딱 코드를 까보면 SQL만 천지이다. 결국엔 ...</p></div></div></a></div><div class="card"> <a href="/posts/3JPA-%EC%86%8C%EA%B0%9C/"><div class="card-body"> <span class="timeago small" > Oct 25, 2021 <i class="unloaded">2021-10-25T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[자바 ORM 표준 JPA 프로그래밍-기본편] JPA 소개</h3><div class="text-muted small"><p> 본 포스팅은 인프러의 JPA 기본편을 수강하고 정리하는 내용입니다. JPA란? Java Persistence API의 준말 자바 진영의 ORM 기술 표준 ORM이란? Object-relational mapping(객체 관계 매핑) 객체는 객체대로 설계 관계형 데이터베이스는 관계형 데이터베이스대로 설...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/14%EC%8B%A4%EC%A0%84-%EC%98%88%EC%A0%9C2-%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91-%EC%8B%9C%EC%9E%91/" class="btn btn-outline-primary" prompt="Older"><p>[자바 ORM 표준 JPA 프로그래밍-기본편] 실전 예제2 - 연관관계 매핑 시작</p></a> <a href="/posts/16%EC%8B%A4%EC%A0%84-%EC%98%88%EC%A0%9C3-%EB%8B%A4%EC%96%91%ED%95%9C-%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91/" class="btn btn-outline-primary" prompt="Newer"><p>[자바 ORM 표준 JPA 프로그래밍-기본편] 실전 예제3 - 다양한 연관관계 매핑</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/jeonyoungho_o">jeonyoungho</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/jpa/">jpa</a> <a class="post-tag" href="/tags/effectivejava/">effectivejava</a> <a class="post-tag" href="/tags/react/">react</a> <a class="post-tag" href="/tags/frontend/">frontend</a> <a class="post-tag" href="/tags/es6/">es6</a> <a class="post-tag" href="/tags/velopert/">velopert</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/poiemaweb/">poiemaweb</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://jeonyoungho.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
