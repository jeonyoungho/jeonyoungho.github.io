<!DOCTYPE html><html lang="ko" mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="[1장. 리액트 입문] 23. Immer 를 사용한 더 쉬운 불변성 관리" /><meta name="author" content="jeonyoungho" /><meta property="og:locale" content="ko" /><meta name="description" content="본 포스팅은 벨로퍼트와 함께하는 모던 리액트를 학습 후 정리하는 목적으로 작성하는 포스팅입니다." /><meta property="og:description" content="본 포스팅은 벨로퍼트와 함께하는 모던 리액트를 학습 후 정리하는 목적으로 작성하는 포스팅입니다." /><link rel="canonical" href="https://jeonyoungho.github.io/posts/23-Immer-%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-%EB%8D%94-%EC%89%AC%EC%9A%B4-%EB%B6%88%EB%B3%80%EC%84%B1-%EA%B4%80%EB%A6%AC/" /><meta property="og:url" content="https://jeonyoungho.github.io/posts/23-Immer-%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-%EB%8D%94-%EC%89%AC%EC%9A%B4-%EB%B6%88%EB%B3%80%EC%84%B1-%EA%B4%80%EB%A6%AC/" /><meta property="og:site_name" content="Youngho’s Devlog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-02-02T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[1장. 리액트 입문] 23. Immer 를 사용한 더 쉬운 불변성 관리" /><meta name="twitter:site" content="@jeonyoungho_o" /><meta name="twitter:creator" content="@jeonyoungho" /><meta name="google-site-verification" content="eonGeSiIVfF48EnFoJqakC7h2hUzgqxFNJaxkfPiGr0" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"jeonyoungho"},"dateModified":"2022-02-02T00:00:00+09:00","datePublished":"2022-02-02T00:00:00+09:00","description":"본 포스팅은 벨로퍼트와 함께하는 모던 리액트를 학습 후 정리하는 목적으로 작성하는 포스팅입니다.","headline":"[1장. 리액트 입문] 23. Immer 를 사용한 더 쉬운 불변성 관리","mainEntityOfPage":{"@type":"WebPage","@id":"https://jeonyoungho.github.io/posts/23-Immer-%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-%EB%8D%94-%EC%89%AC%EC%9A%B4-%EB%B6%88%EB%B3%80%EC%84%B1-%EA%B4%80%EB%A6%AC/"},"url":"https://jeonyoungho.github.io/posts/23-Immer-%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-%EB%8D%94-%EC%89%AC%EC%9A%B4-%EB%B6%88%EB%B3%80%EC%84%B1-%EA%B4%80%EB%A6%AC/"}</script><title>[1장. 리액트 입문] 23. Immer 를 사용한 더 쉬운 불변성 관리 | Youngho's Devlog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Youngho's Devlog"><meta name="application-name" content="Youngho's Devlog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-RF6ZGDWXV1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-RF6ZGDWXV1'); }); </script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5958719204143086" crossorigin="anonymous"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/youngho_employee_pic.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Youngho's Devlog</a></div><div class="site-subtitle font-italic">curios developer</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/jeonyoungho" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/jeonyoungho_o" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['yhjun1000','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>[1장. 리액트 입문] 23. Immer 를 사용한 더 쉬운 불변성 관리</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"> <ins class="adsbygoogle" style="display:block; margin-top: 30px;" data-ad-client="ca-pub-5958719204143086" data-ad-slot="1982371670" data-ad-format="auto" data-full-width-responsive="true"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[1장. 리액트 입문] 23. Immer 를 사용한 더 쉬운 불변성 관리</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> jeonyoungho </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Wed, Feb 2, 2022, 12:00 AM +0900" prep="on" > Feb 2, 2022 <i class="unloaded">2022-02-02T00:00:00+09:00</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2861 words">15 min</span></div></div><div class="post-content"><p>본 포스팅은 <a href="https://react.vlpt.us/">벨로퍼트와 함께하는 모던 리액트</a>를 학습 후 정리하는 목적으로 작성하는 포스팅입니다.</p><h1 id="23-immer-를-사용한-더-쉬운-불변성-관리">23. Immer 를 사용한 더 쉬운 불변성 관리</h1><p>리액트에서 배열이나 객체를 업데이트 해야 할 때에는 직접 수정하면 안되고 불변성을 지켜주면서 업데이트를 해주어야 한다.</p><p>예를 들면 다음과 같이 하면 안되고</p><div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">object</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="na">b</span><span class="p">:</span> <span class="mi">2</span>
<span class="p">};</span>

<span class="nx">object</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
</pre></table></code></div></div><p>다음과 같이 <code class="language-plaintext highlighter-rouge">...(스프레드) 연산자</code> 를 사용해서 새로운 객체를 만들어주어야 한다.</p><div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">object</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">a</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="na">b</span><span class="p">:</span> <span class="mi">2</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">nextObject</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">...</span><span class="nx">object</span><span class="p">,</span>
  <span class="na">b</span><span class="p">:</span> <span class="mi">3</span>
<span class="p">};</span>
</pre></table></code></div></div><p><b>배열도 마찬가지로, push, splice 등의 함수를 사용하거나 n 번째 항목을 직접 수정하면 안되고 다음과 같이 concat, filter, map 등의 함수를 사용해야 한다.</b></p><div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">todos</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="na">text</span><span class="p">:</span> <span class="dl">'</span><span class="s1">할 일 #1</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">done</span><span class="p">:</span> <span class="kc">true</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="na">id</span><span class="p">:</span> <span class="mi">2</span>
    <span class="na">text</span><span class="p">:</span> <span class="dl">'</span><span class="s1">할 일 #2</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">done</span><span class="p">:</span> <span class="kc">false</span>
  <span class="p">}</span>
<span class="p">];</span>

<span class="kd">const</span> <span class="nx">inserted</span> <span class="o">=</span> <span class="nx">todos</span><span class="p">.</span><span class="nf">concat</span><span class="p">({</span>
  <span class="na">id</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
  <span class="na">text</span><span class="p">:</span> <span class="dl">'</span><span class="s1">할 일 #3</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">done</span><span class="p">:</span> <span class="kc">false</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">filtered</span> <span class="o">=</span> <span class="nx">todos</span><span class="p">.</span><span class="nf">filter</span><span class="p">(</span><span class="nx">todo</span> <span class="o">=&gt;</span> <span class="nx">todo</span><span class="p">.</span><span class="nx">id</span> <span class="o">!==</span> <span class="mi">2</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">toggled</span> <span class="o">=</span> <span class="nx">todos</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span>
  <span class="nx">todo</span> <span class="o">=&gt;</span> <span class="nx">todo</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="mi">2</span>
    <span class="p">?</span> <span class="p">{</span>
      <span class="p">...</span><span class="nx">todo</span><span class="p">,</span>
      <span class="na">done</span><span class="p">:</span> <span class="o">!</span><span class="nx">todo</span><span class="p">.</span><span class="nx">done</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="p">:</span> <span class="nx">todo</span>
<span class="p">);</span>
</pre></table></code></div></div><p>대부분의 경우 <code class="language-plaintext highlighter-rouge">...(스프레드) 연산자</code> 또는 배열 내장함수를 사용하는건 그렇게 어렵지는 않지만 데이터의 구조가 조금 까다로워지면 불변성을 지켜가면서 새로운 데이터를 생성해내는 코드가 조금 복잡해진다.</p><p>가령 다음과 같은 객체가 있다고 가정해보자.</p><div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">posts</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="na">title</span><span class="p">:</span> <span class="dl">'</span><span class="s1">제목입니다.</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">body</span><span class="p">:</span> <span class="dl">'</span><span class="s1">내용입니다.</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">comments</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="na">text</span><span class="p">:</span> <span class="dl">'</span><span class="s1">와 정말 잘 읽었습니다.</span><span class="dl">'</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
      <span class="na">title</span><span class="p">:</span> <span class="dl">'</span><span class="s1">제목입니다.</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">body</span><span class="p">:</span> <span class="dl">'</span><span class="s1">내용입니다.</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">comments</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="na">id</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
          <span class="na">text</span><span class="p">:</span> <span class="dl">'</span><span class="s1">또 다른 댓글 어쩌고 저쩌고</span><span class="dl">'</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="na">selectedId</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">};</span>
</pre></table></code></div></div><p>여기서 posts 배열 안의 id 가 1 인 post 객체를 찾아서, comments 에 새로운 댓글 객체를 추가해줘야 한다고 가정해보자. 그렇다면, 다음과 같이 업데이트 해줘야 할 것이다.</p><div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">nextState</span> <span class="o">=</span> <span class="p">{</span>
  <span class="p">...</span><span class="nx">state</span><span class="p">,</span>
  <span class="na">posts</span><span class="p">:</span> <span class="nx">state</span><span class="p">.</span><span class="nx">posts</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="nx">post</span> <span class="o">=&gt;</span>
    <span class="nx">post</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="mi">1</span>
      <span class="p">?</span> <span class="p">{</span>
          <span class="p">...</span><span class="nx">post</span><span class="p">,</span>
          <span class="na">comments</span><span class="p">:</span> <span class="nx">post</span><span class="p">.</span><span class="nx">comments</span><span class="p">.</span><span class="nf">concat</span><span class="p">({</span>
            <span class="na">id</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="na">text</span><span class="p">:</span> <span class="dl">'</span><span class="s1">새로운 댓글</span><span class="dl">'</span>
          <span class="p">})</span>
        <span class="p">}</span>
      <span class="p">:</span> <span class="nx">post</span>
  <span class="p">)</span>
<span class="p">};</span>
</pre></table></code></div></div><p><b>이게 어려운건 아닌데, 솔직히 코드의 구조가 좀 복잡해져서 코드를 봤을 때 한 눈에 들어오질 않는다.</b></p><p><b>이럴 때, immer 라는 라이브러리를 사용하면 다음과 같이 구현을 할 수 있다.</b></p><div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">nextState</span> <span class="o">=</span> <span class="nf">produce</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">draft</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">post</span> <span class="o">=</span> <span class="nx">draft</span><span class="p">.</span><span class="nx">posts</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="nx">post</span> <span class="o">=&gt;</span> <span class="nx">post</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="mi">1</span><span class="p">);</span>
  <span class="nx">post</span><span class="p">.</span><span class="nx">comments</span><span class="p">.</span><span class="nf">push</span><span class="p">({</span>
    <span class="na">id</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="na">text</span><span class="p">:</span> <span class="dl">'</span><span class="s1">와 정말 쉽다!</span><span class="dl">'</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></table></code></div></div><p>코드가 훨씬 깔끔하고 잘 읽혀진다.</p><p><code class="language-plaintext highlighter-rouge">Immer</code> 를 배우기전에 간단하게 요약하면, <code class="language-plaintext highlighter-rouge">Immer</code> 를 사용하면 우리가 상태를 업데이트 할 때, 불변성을 신경쓰지 않으면서 업데이트를 해주면 <code class="language-plaintext highlighter-rouge">Immer</code> 가 불변성 관리를 대신 해준다.</p><h2 id="immer-사용법">Immer 사용법</h2><p>이번 섹션에서는 기존에 만들었던 사용자 관리 프로젝트에 <code class="language-plaintext highlighter-rouge">Immer</code> 를 적용해보면서 Immer 의 사용법을 알아볼 것이다.</p><p>우선 프로젝트에서 다음 명령어를 실행하여 Immer 를 설치해주자.</p><div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nx">yarn</span> <span class="nx">add</span> <span class="nx">immer</span>

<span class="nx">or</span>

<span class="nx">npm</span> <span class="nx">install</span> <span class="nx">immer</span>
</pre></table></code></div></div><p>이 라이브러리를 사용 할 땐 다음과 같이 사용한다.</p><p>우선 코드의 상단에서 <code class="language-plaintext highlighter-rouge">immer</code> 를 불러와주어야 합니다. 보통 <code class="language-plaintext highlighter-rouge">produce</code> 라는 이름으로 불러온다.</p><div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">import</span> <span class="nx">produce</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">immer</span><span class="dl">'</span><span class="p">;</span>
</pre></table></code></div></div><p>그리고 <code class="language-plaintext highlighter-rouge">produce</code> 함수를 사용 할 때에는 <code class="language-plaintext highlighter-rouge">첫번째 파라미터에는 수정하고 싶은 상태</code>, <code class="language-plaintext highlighter-rouge">두번째 파라미터에는 어떻게 업데이트하고 싶을지 정의하는 함수</code>를 넣어준다.</p><p><b>두번째 파라미터에 넣는 함수에서는 불변성에 대해서 신경쓰지 않고 그냥 업데이트 해주면 다 알아서 해준다.</b></p><div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">number</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="na">dontChangeMe</span><span class="p">:</span> <span class="mi">2</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">nextState</span> <span class="o">=</span> <span class="nf">produce</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">draft</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">draft</span><span class="p">.</span><span class="nx">number</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">});</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">nextState</span><span class="p">);</span>
<span class="c1">// { number: 2, dontChangeMe: 2 }</span>
</pre></table></code></div></div><p>다음 <a href="https://codesandbox.io/s/pedantic-grass-ojocz?fontsize=14&amp;file=/src/index.js">링크</a>를 열으면, <code class="language-plaintext highlighter-rouge">Immer</code> 를 쉽게 연습해볼 수 있다.</p><p>연습 해보고 싶으면 위 링크에서 해보고, 우리 프로젝트에서 사용해보도록 하겠다.</p><h2 id="리듀서에서-immer-사용하기">리듀서에서 Immer 사용하기</h2><p>미리 말씀을 드리면, <code class="language-plaintext highlighter-rouge">Immer</code> 를 사용해서 간단해지는 업데이트가 있고, 오히려 코드가 길어지는 업데이트 들이 있다.</p><p><b>예를 들어서 우리가 만들었던 프로젝트의 상태의 경우 users 배열이 객체의 깊은곳에 위치하지 않기 때문에 새 항목을 추가하거나 제거 할 때는 Immer 를 사용하는 것 보다 concat 과 filter 를 사용하는것이 더 코드가 짧고 편하다.</b></p><p>하지만, 사용법을 잘 배워보기 위하여 해당 업데이트도 이번 강좌에서 <code class="language-plaintext highlighter-rouge">Immer</code> 를 사용하여 처리를 해주겠다.</p><ul><li>App.js</ul><div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
</pre><td class="rouge-code"><pre><span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useReducer</span><span class="p">,</span> <span class="nx">useMemo</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">UserList</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./UserList</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">CreateUser</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./CreateUser</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">produce</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">immer</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nf">countActiveUsers</span><span class="p">(</span><span class="nx">users</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">활성 사용자 수를 세는중...</span><span class="dl">'</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">users</span><span class="p">.</span><span class="nf">filter</span><span class="p">(</span><span class="nx">user</span> <span class="o">=&gt;</span> <span class="nx">user</span><span class="p">.</span><span class="nx">active</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">initialState</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">users</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="na">username</span><span class="p">:</span> <span class="dl">'</span><span class="s1">velopert</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">email</span><span class="p">:</span> <span class="dl">'</span><span class="s1">public.velopert@gmail.com</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">active</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
      <span class="na">username</span><span class="p">:</span> <span class="dl">'</span><span class="s1">tester</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">email</span><span class="p">:</span> <span class="dl">'</span><span class="s1">tester@example.com</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">active</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="na">id</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
      <span class="na">username</span><span class="p">:</span> <span class="dl">'</span><span class="s1">liz</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">email</span><span class="p">:</span> <span class="dl">'</span><span class="s1">liz@example.com</span><span class="dl">'</span><span class="p">,</span>
      <span class="na">active</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">};</span>

<span class="kd">function</span> <span class="nf">reducer</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">action</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">switch </span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="dl">'</span><span class="s1">CREATE_USER</span><span class="dl">'</span><span class="p">:</span>
      <span class="k">return</span> <span class="nf">produce</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">draft</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="nx">draft</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="nx">action</span><span class="p">.</span><span class="nx">user</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="k">case</span> <span class="dl">'</span><span class="s1">TOGGLE_USER</span><span class="dl">'</span><span class="p">:</span>
      <span class="k">return</span> <span class="nf">produce</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">draft</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">draft</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="nx">user</span> <span class="o">=&gt;</span> <span class="nx">user</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">action</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
        <span class="nx">user</span><span class="p">.</span><span class="nx">active</span> <span class="o">=</span> <span class="o">!</span><span class="nx">user</span><span class="p">.</span><span class="nx">active</span><span class="p">;</span>
      <span class="p">});</span>
    <span class="k">case</span> <span class="dl">'</span><span class="s1">REMOVE_USER</span><span class="dl">'</span><span class="p">:</span>
      <span class="k">return</span> <span class="nf">produce</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">draft</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">draft</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nf">findIndex</span><span class="p">(</span><span class="nx">user</span> <span class="o">=&gt;</span> <span class="nx">user</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">action</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
        <span class="nx">draft</span><span class="p">.</span><span class="nx">users</span><span class="p">.</span><span class="nf">splice</span><span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="nl">default</span><span class="p">:</span>
      <span class="k">return</span> <span class="nx">state</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// UserDispatch 라는 이름으로 내보내줍니다.</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">UserDispatch</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nf">createContext</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

<span class="kd">function</span> <span class="nf">App</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">state</span><span class="p">,</span> <span class="nx">dispatch</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useReducer</span><span class="p">(</span><span class="nx">reducer</span><span class="p">,</span> <span class="nx">initialState</span><span class="p">);</span>

  <span class="kd">const</span> <span class="p">{</span> <span class="nx">users</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">state</span><span class="p">;</span>

  <span class="kd">const</span> <span class="nx">count</span> <span class="o">=</span> <span class="nf">useMemo</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nf">countActiveUsers</span><span class="p">(</span><span class="nx">users</span><span class="p">),</span> <span class="p">[</span><span class="nx">users</span><span class="p">]);</span>
  <span class="k">return </span><span class="p">(</span>
    <span class="o">&lt;</span><span class="nx">UserDispatch</span><span class="p">.</span><span class="nx">Provider</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="nx">dispatch</span><span class="p">}</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">CreateUser</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="nx">UserList</span> <span class="nx">users</span><span class="o">=</span><span class="p">{</span><span class="nx">users</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="nx">활성사용자</span> <span class="nx">수</span> <span class="p">:</span> <span class="p">{</span><span class="nx">count</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/UserDispatch.Provider</span><span class="err">&gt;
</span>  <span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">TOGGLE_USER</code> 액션의 경우엔 확실히 <code class="language-plaintext highlighter-rouge">Immer</code> 를 사용하니 코드가 깔끔해졌지만 나머지의 경우에는 오히려 코드가 좀 복잡해졌다. 상황에 따라 잘 선택하여 사용하면 된다. <code class="language-plaintext highlighter-rouge">Immer</code> 를 사용한다고 해서 모든 업데이트 로직에서 사용할 필요는 없다.</p><h2 id="immer-와-함수형-업데이트">Immer 와 함수형 업데이트</h2><p>이전에 <code class="language-plaintext highlighter-rouge">useState</code> 를 사용 할 때 <code class="language-plaintext highlighter-rouge">함수형 업데이트</code> 란걸 할 수 있다고 배웠다. 예를 들자면,</p><div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="p">[</span><span class="nx">todo</span><span class="p">,</span> <span class="nx">setTodo</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">({</span>
  <span class="na">text</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Hello</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">done</span><span class="p">:</span> <span class="kc">false</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">onClick</span> <span class="o">=</span> <span class="nf">useCallback</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nf">setTodo</span><span class="p">(</span><span class="nx">todo</span> <span class="o">=&gt;</span> <span class="p">({</span>
    <span class="p">...</span><span class="nx">todo</span><span class="p">,</span>
    <span class="na">done</span><span class="p">:</span> <span class="o">!</span><span class="nx">todo</span><span class="p">.</span><span class="nx">done</span>
  <span class="p">}));</span>
<span class="p">},</span> <span class="p">[]);</span>
</pre></table></code></div></div><p>이렇게 setTodo 함수에 업데이트를 해주는 함수를 넣음으로써, 만약 useCallback 을 사용하는 경우 두번째 파라미터인 deps 배열에 todo 를 넣지 않아도 되게 된다.</p><p><b>이렇게 함수형 업데이트를 하는 경우에, Immer 를 사용하면 상황에 따라 더 편하게 코드를 작성 할 수 있다.</b></p><p>만약에 <code class="language-plaintext highlighter-rouge">produce</code> 함수에 두개의 파라미터를 넣게 된다면, 첫번째 파라미터에 넣은 상태를 불변성을 유지하면서 새로운 상태를 만들어주지만, 만약에 첫번째 파라미터를 생략하고 바로 업데이트 함수를 넣어주게 된다면, 반환 값은 새로운 상태가 아닌 상태를 업데이트 해주는 함수가 된다. 설명으로 이해하기가 조금 어려울 수 있는데 코드를 보면 조금 더 이해가 쉬워진다.</p><div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">todo</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">text</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Hello</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">done</span><span class="p">:</span> <span class="kc">false</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">updater</span> <span class="o">=</span> <span class="nf">produce</span><span class="p">(</span><span class="nx">draft</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">draft</span><span class="p">.</span><span class="nx">done</span> <span class="o">=</span> <span class="o">!</span><span class="nx">draft</span><span class="p">.</span><span class="nx">done</span><span class="p">;</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">nextTodo</span> <span class="o">=</span> <span class="nf">updater</span><span class="p">(</span><span class="nx">todo</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">nextTodo</span><span class="p">);</span>
<span class="c1">// { text: 'Hello', done: true }</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">결국 produce 가 반환하는것이 업데이트 함수</code> 가 되기 때문에 <code class="language-plaintext highlighter-rouge">useState</code> 의 업데이트 함수를 사용 할 떄 다음과 같이 구현 할 수 있게 된다.</p><div class="language-javascript highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="kd">const</span> <span class="p">[</span><span class="nx">todo</span><span class="p">,</span> <span class="nx">setTodo</span><span class="p">]</span> <span class="o">=</span> <span class="nf">useState</span><span class="p">({</span>
  <span class="na">text</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Hello</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">done</span><span class="p">:</span> <span class="kc">false</span>
<span class="p">});</span>

<span class="kd">const</span> <span class="nx">onClick</span> <span class="o">=</span> <span class="nf">useCallback</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nf">setTodo</span><span class="p">(</span>
    <span class="nf">produce</span><span class="p">(</span><span class="nx">draft</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="nx">draft</span><span class="p">.</span><span class="nx">done</span> <span class="o">=</span> <span class="o">!</span><span class="nx">draft</span><span class="p">.</span><span class="nx">done</span><span class="p">;</span>
    <span class="p">})</span>
  <span class="p">);</span>
<span class="p">},</span> <span class="p">[]);</span>
</pre></table></code></div></div><p>이러한 속성을 잘 알아두시고, 나중에 필요할때 잘 사용하면 된다.</p><p><code class="language-plaintext highlighter-rouge">Immer</code> 은 분명히 정말 편한 라이브러리인것은 사실이다. <b>하지만, 확실히 알아둘 점은, 성능적으로 Immer 를 사용하지 않은 코드가 조금 더 빠르다는 점이다.</b></p><p>위 성능 분석표는 50,000개의 원소중에서 5,000 개의 원소를 업데이트 하는 코드를 비교 했을때의 결과이다. 보면, Immer 의 경우 31ms 걸리는 작업이 (map 을 사용하는) Native Reducer 에서는 6ms 걸린 것을 확인 할 수 있다.</p><p>그런데, 이렇게 데이터가 많은데도 31ms 가 걸린다는 것은 사실 큰 문제가 아니다. 인간이 시각적으로 인지 할 수 있는 최소 딜레이는 13ms 라고 한다 (<a href="https://www.pubnub.com/blog/how-fast-is-realtime-human-perception-and-technology/">참고</a>) 그런 것을 생각하면 25ms 의 차이는, 사실 그렇게 큰 차이가 아니기 때문에 걱정할 필요 없다. 심지어, 데이터가 50,000개 가량 있는게 아니라면 별로 성능 차이가 별로 없을 것이기 때문에 더더욱 걱정하지 않아도 된다.</p><p>단, <code class="language-plaintext highlighter-rouge">Immer</code> 는 <code class="language-plaintext highlighter-rouge">JavaScript 엔진의 Proxy</code> 라는 기능을 사용하는데, 구형 브라우저 및 react-native 같은 환경에서는 지원되지 않으므로 (Proxy 처럼 작동하지만 Proxy는 아닌) ES5 fallback 을 사용하게 된다. ES5 fallback 을 사용하게 되는 경우는 191ms 정도로, 꽤나 느려지게 된다. 물론, 여전히 데이터가 별로 없다면 크게 걱정 할 필요는 없다.</p><p><code class="language-plaintext highlighter-rouge">Immer</code> 라이브러리는 확실히 편하기 때문에, 데이터의 구조가 복잡해져서 불변성을 유지하면서 업데이트하려면 코드가 복잡해지는 상황이 온다면, 이를 사용하는 것을 권장한다.</p><p><b>다만, 무조건 사용을 하진 말고, 가능하면 데이터의 구조가 복잡해지게 되는 것을 방지하는데 사용해야 한다.</b> 그리고 어쩔 수 없을 때 Immer 를 사용하는것이 좋다. Immer 를 사용한다고 해도, 필요한곳에만 쓰고, 간단히 처리 될 수 있는 곳에서는 그냥 일반 JavaScript 로 구현하는게 좋다.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/frontend/'>Frontend</a>, <a href='/categories/reactwithvelopert/'>ReactWithVelopert</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/frontend/" class="post-tag no-text-decoration" >frontend</a> <a href="/tags/react/" class="post-tag no-text-decoration" >react</a> <a href="/tags/velopert/" class="post-tag no-text-decoration" >velopert</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[1장. 리액트 입문] 23. Immer 를 사용한 더 쉬운 불변성 관리 - Youngho's Devlog&url=https://jeonyoungho.github.io/posts/23-Immer-%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-%EB%8D%94-%EC%89%AC%EC%9A%B4-%EB%B6%88%EB%B3%80%EC%84%B1-%EA%B4%80%EB%A6%AC/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[1장. 리액트 입문] 23. Immer 를 사용한 더 쉬운 불변성 관리 - Youngho's Devlog&u=https://jeonyoungho.github.io/posts/23-Immer-%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-%EB%8D%94-%EC%89%AC%EC%9A%B4-%EB%B6%88%EB%B3%80%EC%84%B1-%EA%B4%80%EB%A6%AC/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=[1장. 리액트 입문] 23. Immer 를 사용한 더 쉬운 불변성 관리 - Youngho's Devlog&url=https://jeonyoungho.github.io/posts/23-Immer-%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-%EB%8D%94-%EC%89%AC%EC%9A%B4-%EB%B6%88%EB%B3%80%EC%84%B1-%EA%B4%80%EB%A6%AC/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-5958719204143086" data-ad-slot="1982371670" data-ad-format="auto" data-full-width-responsive="true"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script> <ins class="adsbygoogle" style="display:block" data-ad-format="autorelaxed" data-ad-client="ca-pub-5958719204143086" data-ad-slot="5918543412"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script> <script src="https://utteranc.es/client.js" repo="jeonyoungho/jeonyoungho.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async> </script></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Kafka-%EB%A9%94%EC%8B%9C%EC%A7%80-%EC%A0%84%EB%8B%AC-%EB%B3%B4%EC%9E%A5-%EB%B0%A9%EC%8B%9D/">Kafka 메시지 전달 보장 방식</a><li><a href="/posts/Transactional-Outbox-%ED%8C%A8%ED%84%B4/">Transactional Outbox 패턴</a><li><a href="/posts/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EC%9D%B8%EB%8D%B1%EC%8A%A4-%EC%A1%B0%EA%B0%81%ED%99%94/">데이터베이스 인덱스 조각화(Fragmentation)</a><li><a href="/posts/Kafka-DeadLetter-%EA%B4%80%EB%A6%AC/">Kafka DeadLetter 관리</a><li><a href="/posts/Redis-%ED%8A%B9%EC%A7%95/">Redis 특징</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/jpa/">jpa</a> <a class="post-tag" href="/tags/effectivejava/">effectivejava</a> <a class="post-tag" href="/tags/react/">react</a> <a class="post-tag" href="/tags/frontend/">frontend</a> <a class="post-tag" href="/tags/es6/">es6</a> <a class="post-tag" href="/tags/velopert/">velopert</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/poiemaweb/">poiemaweb</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/01-%EB%A6%AC%EC%95%A1%ED%8A%B8%EB%8A%94-%EC%96%B4%EC%A9%8C%EB%8B%A4-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%A1%8C%EC%9D%84%EA%B9%8C/"><div class="card-body"> <span class="timeago small" > Jan 30, 2022 <i class="unloaded">2022-01-30T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[1장. 리액트 입문] 01. 리액트는 어쩌다 만들어졌을까?</h3><div class="text-muted small"><p> 본 포스팅은 벨로퍼트와 함께하는 모던 리액트를 학습 후 정리하는 목적으로 작성하는 포스팅입니다. 01. 리액트는 어쩌다 만들어졌을까? 어떤 기술을 새로 익힐때 해당 기술의 본질(해당 기술이 생겨난 배경, 풀어내고자 하는 문제)를 이해하는 것이 가장 중요하다고 생각한다. 리액트는 왜 만들어졌을까? Javascript를 사용하여 HTML 로 구성한 U...</p></div></div></a></div><div class="card"> <a href="/posts/02-%EC%9E%91%EC%97%85%ED%99%98%EA%B2%BD-%EC%A4%80%EB%B9%84/"><div class="card-body"> <span class="timeago small" > Jan 30, 2022 <i class="unloaded">2022-01-30T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[1장. 리액트 입문] 02. 작업환경 준비</h3><div class="text-muted small"><p> 본 포스팅은 벨로퍼트와 함께하는 모던 리액트를 학습 후 정리하는 목적으로 작성하는 포스팅입니다. 2. 작업환경 준비 앞으로의 튜토리얼을 진행하기 위해 다음 항목들을 설치해주어야 한다. Node.js: Webpack 과 Babel 같은 도구들이 자바스크립트 런타임인 Node.js 를 기반으로 만들어져있다. 그렇기에 해당 도구들을 사용하기 위해서...</p></div></div></a></div><div class="card"> <a href="/posts/03-%EB%82%98%EC%9D%98-%EC%B2%AB%EB%B2%88%EC%A7%B8-%EB%A6%AC%EC%95%A1%ED%8A%B8-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8/"><div class="card-body"> <span class="timeago small" > Jan 30, 2022 <i class="unloaded">2022-01-30T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[1장. 리액트 입문] 3. 나의 첫번째 리액트 컴포넌트</h3><div class="text-muted small"><p> 본 포스팅은 벨로퍼트와 함께하는 모던 리액트를 학습 후 정리하는 목적으로 작성하는 포스팅입니다. 3. 나의 첫번째 리액트 컴포넌트 첫번째 리액트 컴포넌트를 만들어보자. src 디렉터리에 Hello.js 라는 파일을 다음과 같이 작성해보세요. Hello.js import React from 'react'; function Hello() ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/22-Context-API-%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-%EC%A0%84%EC%97%AD-%EA%B0%92-%EA%B4%80%EB%A6%AC/" class="btn btn-outline-primary" prompt="Older"><p>[1장. 리액트 입문] 22. Context API 를 사용한 전역 값 관리</p></a> <a href="/posts/24-%ED%81%B4%EB%9E%98%EC%8A%A4%ED%98%95-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8/" class="btn btn-outline-primary" prompt="Newer"><p>[1장. 리액트 입문] 24. 클래스형 컴포넌트</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/jeonyoungho_o">jeonyoungho</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/jpa/">jpa</a> <a class="post-tag" href="/tags/effectivejava/">effectivejava</a> <a class="post-tag" href="/tags/react/">react</a> <a class="post-tag" href="/tags/frontend/">frontend</a> <a class="post-tag" href="/tags/es6/">es6</a> <a class="post-tag" href="/tags/velopert/">velopert</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/poiemaweb/">poiemaweb</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://jeonyoungho.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
