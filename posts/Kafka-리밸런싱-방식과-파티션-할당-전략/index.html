<!DOCTYPE html><html lang="ko" mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Kafka 리밸런싱 방식과 파티션 할당 전략" /><meta name="author" content="jeonyoungho" /><meta property="og:locale" content="ko" /><meta name="description" content="Kafka에서 리밸런싱이란 컨슈머 그룹 내 컨슈머들의 파티션 할당이 변경되는 과정을 의미하며, 주로 다음과 같은 4가지 상황에서 발생한다." /><meta property="og:description" content="Kafka에서 리밸런싱이란 컨슈머 그룹 내 컨슈머들의 파티션 할당이 변경되는 과정을 의미하며, 주로 다음과 같은 4가지 상황에서 발생한다." /><link rel="canonical" href="https://jeonyoungho.github.io/posts/Kafka-%EB%A6%AC%EB%B0%B8%EB%9F%B0%EC%8B%B1-%EB%B0%A9%EC%8B%9D%EA%B3%BC-%ED%8C%8C%ED%8B%B0%EC%85%98-%ED%95%A0%EB%8B%B9-%EC%A0%84%EB%9E%B5/" /><meta property="og:url" content="https://jeonyoungho.github.io/posts/Kafka-%EB%A6%AC%EB%B0%B8%EB%9F%B0%EC%8B%B1-%EB%B0%A9%EC%8B%9D%EA%B3%BC-%ED%8C%8C%ED%8B%B0%EC%85%98-%ED%95%A0%EB%8B%B9-%EC%A0%84%EB%9E%B5/" /><meta property="og:site_name" content="Youngho’s Devlog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-07-23T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Kafka 리밸런싱 방식과 파티션 할당 전략" /><meta name="twitter:site" content="@jeonyoungho_o" /><meta name="twitter:creator" content="@jeonyoungho" /><meta name="google-site-verification" content="eonGeSiIVfF48EnFoJqakC7h2hUzgqxFNJaxkfPiGr0" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"jeonyoungho"},"dateModified":"2025-07-23T00:00:00+09:00","datePublished":"2025-07-23T00:00:00+09:00","description":"Kafka에서 리밸런싱이란 컨슈머 그룹 내 컨슈머들의 파티션 할당이 변경되는 과정을 의미하며, 주로 다음과 같은 4가지 상황에서 발생한다.","headline":"Kafka 리밸런싱 방식과 파티션 할당 전략","mainEntityOfPage":{"@type":"WebPage","@id":"https://jeonyoungho.github.io/posts/Kafka-%EB%A6%AC%EB%B0%B8%EB%9F%B0%EC%8B%B1-%EB%B0%A9%EC%8B%9D%EA%B3%BC-%ED%8C%8C%ED%8B%B0%EC%85%98-%ED%95%A0%EB%8B%B9-%EC%A0%84%EB%9E%B5/"},"url":"https://jeonyoungho.github.io/posts/Kafka-%EB%A6%AC%EB%B0%B8%EB%9F%B0%EC%8B%B1-%EB%B0%A9%EC%8B%9D%EA%B3%BC-%ED%8C%8C%ED%8B%B0%EC%85%98-%ED%95%A0%EB%8B%B9-%EC%A0%84%EB%9E%B5/"}</script><title>Kafka 리밸런싱 방식과 파티션 할당 전략 | Youngho's Devlog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Youngho's Devlog"><meta name="application-name" content="Youngho's Devlog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-RF6ZGDWXV1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-RF6ZGDWXV1'); }); </script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5958719204143086" crossorigin="anonymous"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/youngho_employee_pic.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Youngho's Devlog</a></div><div class="site-subtitle font-italic">curios developer</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/jeonyoungho" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/jeonyoungho_o" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['yhjun1000','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Kafka 리밸런싱 방식과 파티션 할당 전략</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"> <ins class="adsbygoogle" style="display:block; margin-top: 30px;" data-ad-client="ca-pub-5958719204143086" data-ad-slot="1982371670" data-ad-format="auto" data-full-width-responsive="true"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Kafka 리밸런싱 방식과 파티션 할당 전략</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> jeonyoungho </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Wed, Jul 23, 2025, 12:00 AM +0900" prep="on" > Jul 23 <i class="unloaded">2025-07-23T00:00:00+09:00</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2970 words">16 min</span></div></div><div class="post-content"><p>Kafka에서 리밸런싱이란 컨슈머 그룹 내 컨슈머들의 파티션 할당이 변경되는 과정을 의미하며, 주로 다음과 같은 4가지 상황에서 발생한다.</p><ul><li>1) 컨슈머 그룹에 새로운 컨슈머 추가<li>2) 기존 컨슈머가 컨슈머 그룹에서 제거<li>3) 구독중인 토픽에 새로운 파티션 추가<li>4) 컨슈머가 구독하는 토픽 변경</ul><p>리밸런싱은 주로 애플리케이션 배포 시 발생하는데, 이와 관련하여 Kafka 리밸런싱 방식과 파티션 할당 전략에 대해 알아보자.</p><h1 id="리밸런싱-방식">리밸런싱 방식</h1><p>리밸런싱은 <strong>‘적극적 리밸런싱’</strong>과 <strong>‘협력적 리밸런싱’</strong> 두 가지 방식으로 나뉘어진다.</p><h2 id="적극적-리밸런싱eager-rebalance">적극적 리밸런싱(Eager Rebalance)</h2><p>적극적 리밸런싱은 리밸런싱이 발생할 때 모든 컨슈머가 브로커로부터 메시지 소비를 중단하고, 기존 할당된 파티션들을 재분배하는 방식이다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/posts/Backend/Kafka/kafka_eager_rebalance.png" alt="Image" /></p><ul><li>1) Detection 단계: 새로운 컨슈머(consumer3)가 그룹에 합류한다.(트리거)<li>2) Stopping 단계: 해당 컨슈머 그룹내 모든 컨슈머에게 할당된 모든 파티션을 제거한다.(<strong>downtime 발생</strong>)<li>3) Restart 단계: 모든 컨슈머들의 파티션 무작위 재할당 후 메시지 소비 재개한다.</ul><p>해당 방식은 컨슈머들이 이전에 할당되었던 파티션을 반드시 다시 받는다는 보장이 없다. 즉, 리밸런싱 후에는 기존 컨슈머들이 새로운 파티션을 할당받을 가능성이 있다.</p><p>또한, Stopping 단계에서 모든 컨슈머의 메시지 소비가 중단되기에 Stop the world 현상이 발생한다. 이로 인해 컨슈머 메시지 처리 성능에 일시적인 영향을 미칠 수 있으며, 프로듀서에는 영향이 없기에 컨슈머 Lag이 증가할 수 있다.</p><h2 id="협력적-리밸런싱cooperative-rebalance">협력적 리밸런싱(Cooperative Rebalance)</h2><p>Kafka v2.4부터 도입된 진보된 리밸런싱 방식으로, 컨슈머 그룹의 메시지 소비 중단 없이 파티션 재분배가 일어난다. 기존에 할당된 파티션을 새로 합류한 컨슈머에게 양도하는 방식으로 동작한다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/posts/Backend/Kafka/kafka_cooperative_rebalance.png" alt="Image" /></p><ul><li>1) Detection 단계: 새로운 컨슈머(consumer3)가 그룹에 합류한다.(트리거)<li>2) First Rebalance 단계: 컨슈머 그룹의 리더는 현재 컨슈머가 소유한 파티션 정보를 활용해 제외할 파티션 정보를 담은 새로운 파티션 할당 정보를 컨슈머 그룹 멤버들에게 전달한다. 새로운 파티션 할당 정보를 받은 컨슈머 그룹 멤버들은 필요없는 파티션을 골라 제외한다. 이전 파티션 할당 정보와 새로운 파티션 할당 정보가 동일한 파티션들에 대해서는 중단 없이 메시지 소비가 가능하게 된다.<li>3) Second Rebalance 단계: 제외한 파티션 할당을 위해 컨슈머들은 다시 합류 요청을 전송한다. 이 때 두 번재 리밸런싱이 트리거 되고, 컨슈머 그룹의 리더는 제외된 파티션을 새로 합류한 컨슈머에게 할당한다.</ul><p>해당 방식의 핵심 포인트는 두 가지다.</p><ul><li>컨슈머의 downtime이 발생하지 않는 점<li>파티션 할당이 안정적인 상태가 될 때 까지 몇 번의 반복이 필요할 수 있다는 점</ul><p>이를 통해, 전체 컨슈머의 메시지 소비 중단 없는 리밸런싱할 수 있는 장점을 얻을 수 있다.</p><h1 id="파티션-할당-전략">파티션 할당 전략</h1><p>파티션 할당 전략(Partition Assignment Strategy)은 컨슈머가 토픽의 어떤 파티션을 소비할 것인지 결정하는 방식을 뜻한다.</p><p>이 전략에 따라 컨슈머와 파티션 간의 매핑이 이뤄지며, 데이터 처리 효율성과 성능에 큰 영향을 미친다.</p><p>파티션 할당 전략은 총 4가지가 존재한다.</p><ul><li>1) 레인지 파티션 할당 전략(EAGER)<li>2) 라운드 로빈 파티션 할당 전략(EAGER)<li>3) 스티키 파티션 할당 전략(EAGER)<li>4) 협력적 스티키 파티션 할당 전략(COOPERATIVE)</ul><h2 id="1-레인지-파티션-할당-전략eager">1. 레인지 파티션 할당 전략(EAGER)</h2><p>‘적극적 리밸런싱’ 방식 중 하나로, Kafka v2.4 이전까지의 디폴트 파티션 할당 전략이다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/posts/Backend/Kafka/range_partition_assign_strategy.png" alt="Image" /> <em>https://www.conduktor.io/blog/kafka-partition-assignment-strategy/</em></p><p>이 전략은 다음과 같은 방식으로 진행된다.x</p><ul><li>1) 구독 중인 토픽의 파티션과 컨슈머를 순서대로 나열한다.<li>2) 이후 각 컨슈머가 받아야 할 파티션의 수를 결정하는데, 이는 해당 토픽의 전체 파티션 수를 컨슈머 그룹의 총 컨슈머 수로 나눈 값이다.<li>3) 만약 컨슈머 수와 파티션 수가 정확히 일치한다면, 모든 컨슈머는 파티션을 균등하게 할당받는다.<li>4) 그러나 파티션 수가 컨슈머 수로 균등하게 나누어지지 않는다면, 순서상 앞에 있는 컨슈머들이 추가로 파티션을 할당받게 된다.</ul><p><strong>장점</strong></p><ul><li>특정 도메인에 대한 데이터 처리를 한 컨슈머에서 일관되게 처리할 수 있다.<ul><li>예를 들어 정상 로그와 에러 로그를 각각 처리하는 두 토픽(topic01, topic02)이 있다고 가정하자. 두 토픽의 파티션 수가 같을 때 로그 프로듀서가 동일한 메시지key를 사용하면 동일한 파티션(ex. partition0)으로 발행된다. 두 토픽의 partition0 은 모두 동일한 컨슈머에서 처리되기에 일관된 데이터 처리가 가능하다.</ul></ul><p><strong>단점</strong></p><ul><li>Eager 프로토콜로 동작하기에 리밸런싱 발생시 모든 컨슈머가 작업을 중단하게 된다.<li>컨슈머의 파티션 할당이 불균형하기 때문에 특정 컨슈머에만 메시지가 몰리는 현상이 생길 수 있다.</ul><h2 id="2-라운드-로빈-파티션-할당-전략eager">2. 라운드 로빈 파티션 할당 전략(EAGER)</h2><p>‘적극적 리밸런싱’ 방식 중 하나이다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/posts/Backend/Kafka/range_partition_assign_strategy.png" alt="Image" /> <em>https://www.conduktor.io/blog/kafka-partition-assignment-strategy/</em></p><p>레인지(Range) 전략과 동일하게 파티션과 컨슈머는 할당 전에 사전식 순서로 정렬된후, 파티션을 컨슈머 그룹의 모든 컨슈머에게 균등하게 분배하는 방식이다.</p><p><strong>장점</strong></p><ul><li>모든 컨슈머에 균등한 파티션 분배가 이뤄지기에, 컨슈머를 효율적으로 활용하여 성능을 향상시킬 수 있다.</ul><p><strong>단점</strong></p><ul><li>Eager 프로토콜로 동작하기에 리밸런싱 발생시 모든 컨슈머가 작업을 중단하게 된다.<li>모든 파티션을 균등하게 분배하려 하기에, 컨슈머가 다운되었을때 불필요한 파티션 재할당이 발생하게 되어 컨슈머 성능에 영향을 주게 된다.<ul><li>예를 들어, 위 이미지에서 컨슈머2의 연결이 끊어질 경우 파티션 A-1, B-0, B-1의 할당이 변경되는 것을 볼 수 있다.<li>이로 인해 4개의 파티션 중 3개의 파티션이 다른 사용 가능한 컨슈머에게 다시 재할당되는 상황이 발생한다.</ul></ul><h2 id="3-스티키-파티션-할당-전략eager">3. 스티키 파티션 할당 전략(EAGER)</h2><p>‘적극적 리밸런싱’ 방식 중 하나이다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/posts/Backend/Kafka/sticky_partition_assignment_strategy.png" alt="Image" /> <em>https://www.conduktor.io/blog/kafka-partition-assignment-strategy/</em></p><p>앞선 두 전략은 리밸런싱 발생시 기존 매핑정보와 전혀 다른 매핑이 이뤄진다. 스티키 파티션 할당 전략은 이와 달리 리밸런싱이 발생하더라도 기존 매핑 정보를 최대한 유지하는 컨슈머-파티션 할당 전략이다.</p><p>스티키 파티션 할당 전략은 2가지 목적으로 컨슈머에 파티션을 할당한다.</p><p><strong>첫 번째는 가능한 한 균형 잡힌 파티션 할당이고, 두 번째는 리밸런싱이 발생할 때 되도록 기존 할당된 파티션을 유지하는 것이다. 이 중 첫 번째 목적의 우선순위가 더 높기 때문에 항상 기존 파티션과 컨슈머 매핑을 보장하진 않는다.</strong></p><p><strong>장점</strong></p><ul><li>라운드 로빈 전략의 불필요한 파티션 재할당 문제가 발생하지 않습니다.<ul><li>예를 들어, 위 이미지에서 컨슈머2의 인스턴스가 다운되거나 실패한 경우를 살펴보자.<li>컨슈머1과 컨슈머3은 기존에 할당받았던 파티션을 그대로 유지하고, 컨슈머2가 가지고 있던 파티션은 새로운 컨슈머3에게 할당된다.<li>이렇게 함으로써 불필요한 파티션 재할당을 최소화하고 시스템 균형을 유지할 수 있게 된다.</ul></ul><p><strong>단점</strong></p><ul><li>Eager 프로토콜로 동작하기에 리밸런싱 발생시 모든 컨슈머가 작업을 중단하게 된다.</ul><blockquote><p><strong>Note</strong>: 스티키 파티션 할당 전략은 컨슈머들의 균형있는 파티션 할당과 리밸런싱 과정의 효율성이 중요할 때 적합하다.</p></blockquote><h2 id="4-협력적-스티키-파티션-할당-전략cooperative">4. 협력적 스티키 파티션 할당 전략(COOPERATIVE)</h2><p>기존 스티키 파티션 전략에 ‘협력적 리밸런싱’ 방식이라는 새로운 방식을 추가한 것이며, <a href="https://kafka.apache.org/31/documentation.html#upgrade_310_notable">kafka v2.4부터 디폴트로 지정되었다.</a></p><p>COOPERATIVE 프로토콜을 사용하여 리밸런싱이 필요한 특정 파티션에만 집중하며, 그 외의 나머지 파티션들은 컨슈머와 매핑을 그대로 유지한다.</p><p>즉, Stop the world 없이 재할당이 필요한 파티션의 메시지 소비만 중단되기에, 전체적인 데이터 처리 성능을 큰 영향을 주지 않는다.</p><p>이 같은 특징 덕분에 <strong>협력적 스티키 전략은 컨슈머 그룹의 구성 변경이 자주 발생하는 환경에 특히 유용하며 효율적인 리밸런싱을 수행할 수 있다.</strong></p><h1 id="정리">정리</h1><h2 id="리밸런싱-방식-1">리밸런싱 방식</h2><div class="table-wrapper"><table><thead><tr><th>리밸런싱 방식<th>설명<th>영향 범위<th>적용 전략<tbody><tr><td>적극적 리밸런싱 (EAGER)<td>리밸런싱 발생 시 모든 컨슈머가 데이터 수신을 중단하고 파티션의 소유권을 포기<td>전체 컨슈머 그룹<td>레인지, 라운드로빈, 스티키<tr><td>협력적 리밸런싱 (COOPERATIVE)<td>리밸런싱이 필요한 특정 파티션에만 영향을 주며, 그 외의 파티션들은 그대로 유지. 개별 컨슈머의 작업 중단을 최소화<td>특정 파티션<td>협력적스티키</table></div><h2 id="파티션-할당-전략-1">파티션 할당 전략</h2><div class="table-wrapper"><table><thead><tr><th>파티션 할당 전략<th>설명<th>리밸런싱 프로토콜<tbody><tr><td>레인지 할당 전략<td>토픽 별로 동일한 파티션을 특정 컨슈머에게 할당하는 방식<td>EAGER<tr><td>라운드 로빈 할당 전략<td>사용 가능한 파티션과 컨슈머를 순차적으로 할당하는 방식<td>EAGER<tr><td>스티키 할당 전략<td>컨슈머가 기존 할당된 파티션을 최대한 유지하는 방식<td>EAGER<tr><td>협력적 스티키 할당 전략<td>Sticky와 동일하지만 Stop the world 없는 점진적인 방식<td>COOPERATIVE</table></div><h1 id="reference">Reference</h1><ul><li><a href="https://dkswnkk.tistory.com/736">https://dkswnkk.tistory.com/736</a><li><a href="https://junior-datalist.tistory.com/387">https://junior-datalist.tistory.com/387</a><li><a href="https://assu10.github.io/dev/2024/06/23/kafka-consumer-1/">https://assu10.github.io/dev/2024/06/23/kafka-consumer-1/</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/backend/'>Backend</a>, <a href='/categories/kafka/'>Kafka</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/kafka/" class="post-tag no-text-decoration" >kafka</a> <a href="/tags/rebalancing/" class="post-tag no-text-decoration" >rebalancing</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Kafka 리밸런싱 방식과 파티션 할당 전략 - Youngho's Devlog&url=https://jeonyoungho.github.io/posts/Kafka-%EB%A6%AC%EB%B0%B8%EB%9F%B0%EC%8B%B1-%EB%B0%A9%EC%8B%9D%EA%B3%BC-%ED%8C%8C%ED%8B%B0%EC%85%98-%ED%95%A0%EB%8B%B9-%EC%A0%84%EB%9E%B5/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Kafka 리밸런싱 방식과 파티션 할당 전략 - Youngho's Devlog&u=https://jeonyoungho.github.io/posts/Kafka-%EB%A6%AC%EB%B0%B8%EB%9F%B0%EC%8B%B1-%EB%B0%A9%EC%8B%9D%EA%B3%BC-%ED%8C%8C%ED%8B%B0%EC%85%98-%ED%95%A0%EB%8B%B9-%EC%A0%84%EB%9E%B5/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Kafka 리밸런싱 방식과 파티션 할당 전략 - Youngho's Devlog&url=https://jeonyoungho.github.io/posts/Kafka-%EB%A6%AC%EB%B0%B8%EB%9F%B0%EC%8B%B1-%EB%B0%A9%EC%8B%9D%EA%B3%BC-%ED%8C%8C%ED%8B%B0%EC%85%98-%ED%95%A0%EB%8B%B9-%EC%A0%84%EB%9E%B5/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-5958719204143086" data-ad-slot="1982371670" data-ad-format="auto" data-full-width-responsive="true"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script> <ins class="adsbygoogle" style="display:block" data-ad-format="autorelaxed" data-ad-client="ca-pub-5958719204143086" data-ad-slot="5918543412"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script> <script src="https://utteranc.es/client.js" repo="jeonyoungho/jeonyoungho.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async> </script></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Kafka-%EB%A9%94%EC%8B%9C%EC%A7%80-%EC%A0%84%EB%8B%AC-%EB%B3%B4%EC%9E%A5-%EB%B0%A9%EC%8B%9D/">Kafka 메시지 전달 보장 방식</a><li><a href="/posts/Transactional-Outbox-%ED%8C%A8%ED%84%B4/">Transactional Outbox 패턴</a><li><a href="/posts/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EC%9D%B8%EB%8D%B1%EC%8A%A4-%EC%A1%B0%EA%B0%81%ED%99%94/">데이터베이스 인덱스 조각화(Fragmentation)</a><li><a href="/posts/Kafka-DeadLetter-%EA%B4%80%EB%A6%AC/">Kafka DeadLetter 관리</a><li><a href="/posts/Redis-%ED%8A%B9%EC%A7%95/">Redis 특징</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/jpa/">jpa</a> <a class="post-tag" href="/tags/effectivejava/">effectivejava</a> <a class="post-tag" href="/tags/react/">react</a> <a class="post-tag" href="/tags/frontend/">frontend</a> <a class="post-tag" href="/tags/es6/">es6</a> <a class="post-tag" href="/tags/velopert/">velopert</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/poiemaweb/">poiemaweb</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Kafka-DeadLetter-%EA%B4%80%EB%A6%AC/"><div class="card-body"> <span class="timeago small" > May 11 <i class="unloaded">2025-05-11T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Kafka DeadLetter 관리</h3><div class="text-muted small"><p> MSA 환경에서 이벤트 기반 아키텍처(EDA)를 적용할때 Kafka가 주로 사용되곤 한다. 카프카 Consumer 메시지 처리 실패시 dead-letter를 어떻게 관리하고 재시도 전략을 수립하면 좋을지 깊게 고찰해보자. (잘못된 내용 및 피드백은 코멘트로 남겨주시면 최대한 빠르게 확인해보겠습니다😃) 가장 간단하게는 spring-kafka에서 제공...</p></div></div></a></div><div class="card"> <a href="/posts/Kafka-%EA%B0%9C%EC%9A%94/"><div class="card-body"> <span class="timeago small" > Jun 30, 2021 <i class="unloaded">2021-06-30T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Kafka 개요</h3><div class="text-muted small"><p> MessageQueue 데이터를 전송하는 애플리케이션과 데이터를 수신 받는 애플리케이션의 개수가 늘어날 수 록 데이터 전송라인이 많아 지게 됨 데이터 전송라인이 많아지면 배포와 장애에 대응하기 어려움 데이터를 전송할 때의 프로토콜의 파편화가 심각해짐 추후 데이터의 포맷내부에 변경이 있을 때 유지보수하기 매우 어려워짐 카프카는 이런 ...</p></div></div></a></div><div class="card"> <a href="/posts/Kafka-%EA%B8%B0%EB%B3%B8-%EC%8B%A4%EC%8A%B5/"><div class="card-body"> <span class="timeago small" > Jun 30, 2021 <i class="unloaded">2021-06-30T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Kafka 기본 실습</h3><div class="text-muted small"><p> Kafka-실습1 Kafka 설치 1) homebrew를 통한 kafka 설치 brew install kafka Kafka 실행 2) Kafka를 실행하기 전 zookeeper를 먼저 시작 brew services start zookeeper 3) Kafka 시작 brew services start kafka 4) Kafka에...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Transactional-Outbox-%ED%8C%A8%ED%84%B4/" class="btn btn-outline-primary" prompt="Older"><p>Transactional Outbox 패턴</p></a> <a href="/posts/Kafka-%EB%A9%94%EC%8B%9C%EC%A7%80-%EC%A0%84%EB%8B%AC-%EB%B3%B4%EC%9E%A5-%EB%B0%A9%EC%8B%9D/" class="btn btn-outline-primary" prompt="Newer"><p>Kafka 메시지 전달 보장 방식</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/jeonyoungho_o">jeonyoungho</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/jpa/">jpa</a> <a class="post-tag" href="/tags/effectivejava/">effectivejava</a> <a class="post-tag" href="/tags/react/">react</a> <a class="post-tag" href="/tags/frontend/">frontend</a> <a class="post-tag" href="/tags/es6/">es6</a> <a class="post-tag" href="/tags/velopert/">velopert</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/poiemaweb/">poiemaweb</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://jeonyoungho.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
