<!DOCTYPE html><html lang="ko" mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="[디자인패턴] Visitor 패턴" /><meta name="author" content="jeonyoungho" /><meta property="og:locale" content="ko" /><meta name="description" content="개요 Visitor(방문자)패턴은 방문자와 방문 공간을 분리하여 방문 공간이 방문자를 맞이할 때, 이후에 대한 행동을 방문자에게 위임하는 패턴이다. 클래스 다이어그램은 아래 이미지와 같다." /><meta property="og:description" content="개요 Visitor(방문자)패턴은 방문자와 방문 공간을 분리하여 방문 공간이 방문자를 맞이할 때, 이후에 대한 행동을 방문자에게 위임하는 패턴이다. 클래스 다이어그램은 아래 이미지와 같다." /><link rel="canonical" href="https://jeonyoungho.github.io/posts/Visitor%ED%8C%A8%ED%84%B4/" /><meta property="og:url" content="https://jeonyoungho.github.io/posts/Visitor%ED%8C%A8%ED%84%B4/" /><meta property="og:site_name" content="Youngho’s Devlog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-11-06T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[디자인패턴] Visitor 패턴" /><meta name="twitter:site" content="@jeonyoungho_o" /><meta name="twitter:creator" content="@jeonyoungho" /><meta name="google-site-verification" content="eonGeSiIVfF48EnFoJqakC7h2hUzgqxFNJaxkfPiGr0" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"jeonyoungho"},"dateModified":"2024-11-06T00:00:00+09:00","datePublished":"2024-11-06T00:00:00+09:00","description":"개요 Visitor(방문자)패턴은 방문자와 방문 공간을 분리하여 방문 공간이 방문자를 맞이할 때, 이후에 대한 행동을 방문자에게 위임하는 패턴이다. 클래스 다이어그램은 아래 이미지와 같다.","headline":"[디자인패턴] Visitor 패턴","mainEntityOfPage":{"@type":"WebPage","@id":"https://jeonyoungho.github.io/posts/Visitor%ED%8C%A8%ED%84%B4/"},"url":"https://jeonyoungho.github.io/posts/Visitor%ED%8C%A8%ED%84%B4/"}</script><title>[디자인패턴] Visitor 패턴 | Youngho's Devlog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Youngho's Devlog"><meta name="application-name" content="Youngho's Devlog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-RF6ZGDWXV1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-RF6ZGDWXV1'); }); </script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5958719204143086" crossorigin="anonymous"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/youngho_employee_pic.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Youngho's Devlog</a></div><div class="site-subtitle font-italic">curios developer</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/jeonyoungho" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/jeonyoungho_o" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['yhjun1000','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>[디자인패턴] Visitor 패턴</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"> <ins class="adsbygoogle" style="display:block; margin-top: 30px;" data-ad-client="ca-pub-5958719204143086" data-ad-slot="1982371670" data-ad-format="auto" data-full-width-responsive="true"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[디자인패턴] Visitor 패턴</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> jeonyoungho </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Wed, Nov 6, 2024, 12:00 AM +0900" prep="on" > Nov 6, 2024 <i class="unloaded">2024-11-06T00:00:00+09:00</i> </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1157 words">6 min</span></div></div><div class="post-content"><h1 id="개요">개요</h1><p>Visitor(방문자)패턴은 방문자와 방문 공간을 분리하여 방문 공간이 방문자를 맞이할 때, 이후에 대한 행동을 방문자에게 위임하는 패턴이다. 클래스 다이어그램은 아래 이미지와 같다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://github.com/user-attachments/assets/fcca4f9a-7bb8-40bf-8df3-b7e0795c1a89" alt="image" /> <em>출처: https://brownbears.tistory.com/575</em></p><h1 id="예제">예제</h1><p>아래 예제는 문서 변환 시스템에 적용한 예제이다.</p><p>DocumentElement 인터페이스의 구체 클래스들은 실제 방문 공간이고 DocumentVisitor(MarkdownVisitor, HtmlExportVisitor, 방문자)에게 방문 공간을 맞이할때 수행할 책임들을 위임해주고 있다.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
</pre><td class="rouge-code"><pre><span class="c1">// 기본 문서 요소 인터페이스</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">DocumentElement</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">accept</span><span class="o">(</span><span class="nc">DocumentVisitor</span> <span class="n">visitor</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">// 구체적인 문서 요소들</span>
<span class="nd">@Getter</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TextElement</span> <span class="kd">implements</span> <span class="nc">DocumentElement</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">content</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">fontStyle</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">fontSize</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">accept</span><span class="o">(</span><span class="nc">DocumentVisitor</span> <span class="n">visitor</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">visitor</span><span class="o">.</span><span class="na">visitText</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="nd">@Getter</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ImageElement</span> <span class="kd">implements</span> <span class="nc">DocumentElement</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">source</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">width</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">height</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">altText</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">accept</span><span class="o">(</span><span class="nc">DocumentVisitor</span> <span class="n">visitor</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">visitor</span><span class="o">.</span><span class="na">visitImage</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="nd">@Getter</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TableElement</span> <span class="kd">implements</span> <span class="nc">DocumentElement</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;&gt;</span> <span class="n">data</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">headers</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">borderStyle</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">accept</span><span class="o">(</span><span class="nc">DocumentVisitor</span> <span class="n">visitor</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">visitor</span><span class="o">.</span><span class="na">visitTable</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// 방문자 인터페이스</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">DocumentVisitor</span> <span class="o">{</span>
    <span class="kt">void</span> <span class="nf">visitText</span><span class="o">(</span><span class="nc">TextElement</span> <span class="n">text</span><span class="o">);</span>
    <span class="kt">void</span> <span class="nf">visitImage</span><span class="o">(</span><span class="nc">ImageElement</span> <span class="n">image</span><span class="o">);</span>
    <span class="kt">void</span> <span class="nf">visitTable</span><span class="o">(</span><span class="nc">TableElement</span> <span class="n">table</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">// HTML 변환 방문자</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HtmlExportVisitor</span> <span class="kd">implements</span> <span class="nc">DocumentVisitor</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">StringBuilder</span> <span class="n">html</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">visitText</span><span class="o">(</span><span class="nc">TextElement</span> <span class="n">text</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">html</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span>
            <span class="s">"&lt;p style='font-family: %s; font-size: %dpx;'&gt;%s&lt;/p&gt;"</span><span class="o">,</span>
            <span class="n">text</span><span class="o">.</span><span class="na">getFontStyle</span><span class="o">(),</span>
            <span class="n">text</span><span class="o">.</span><span class="na">getFontSize</span><span class="o">(),</span>
            <span class="n">text</span><span class="o">.</span><span class="na">getContent</span><span class="o">()</span>
        <span class="o">));</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">visitImage</span><span class="o">(</span><span class="nc">ImageElement</span> <span class="n">image</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">html</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span>
            <span class="s">"&lt;img src='%s' width='%d' height='%d' alt='%s' /&gt;"</span><span class="o">,</span>
            <span class="n">image</span><span class="o">.</span><span class="na">getSource</span><span class="o">(),</span>
            <span class="n">image</span><span class="o">.</span><span class="na">getWidth</span><span class="o">(),</span>
            <span class="n">image</span><span class="o">.</span><span class="na">getHeight</span><span class="o">(),</span>
            <span class="n">image</span><span class="o">.</span><span class="na">getAltText</span><span class="o">()</span>
        <span class="o">));</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">visitTable</span><span class="o">(</span><span class="nc">TableElement</span> <span class="n">table</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">html</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"&lt;table border='1'&gt;\n"</span><span class="o">);</span>
        
        <span class="c1">// 헤더 추가</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">table</span><span class="o">.</span><span class="na">getHeaders</span><span class="o">().</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">html</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"  &lt;tr&gt;\n"</span><span class="o">);</span>
            <span class="k">for</span> <span class="o">(</span><span class="nc">String</span> <span class="n">header</span> <span class="o">:</span> <span class="n">table</span><span class="o">.</span><span class="na">getHeaders</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">html</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"    &lt;th&gt;"</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="n">header</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="s">"&lt;/th&gt;\n"</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">html</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"  &lt;/tr&gt;\n"</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="c1">// 데이터 행 추가</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">row</span> <span class="o">:</span> <span class="n">table</span><span class="o">.</span><span class="na">getData</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">html</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"  &lt;tr&gt;\n"</span><span class="o">);</span>
            <span class="k">for</span> <span class="o">(</span><span class="nc">String</span> <span class="n">cell</span> <span class="o">:</span> <span class="n">row</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">html</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"    &lt;td&gt;"</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="n">cell</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="s">"&lt;/td&gt;\n"</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">html</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"  &lt;/tr&gt;\n"</span><span class="o">);</span>
        <span class="o">}</span>
        
        <span class="n">html</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"&lt;/table&gt;"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getHtml</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">html</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// Markdown 변환 방문자</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MarkdownExportVisitor</span> <span class="kd">implements</span> <span class="nc">DocumentVisitor</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">StringBuilder</span> <span class="n">markdown</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">visitText</span><span class="o">(</span><span class="nc">TextElement</span> <span class="n">text</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">markdown</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">text</span><span class="o">.</span><span class="na">getContent</span><span class="o">()).</span><span class="na">append</span><span class="o">(</span><span class="s">"\n\n"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">visitImage</span><span class="o">(</span><span class="nc">ImageElement</span> <span class="n">image</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">markdown</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span>
            <span class="s">"![%s](%s)\n"</span><span class="o">,</span>
            <span class="n">image</span><span class="o">.</span><span class="na">getAltText</span><span class="o">(),</span>
            <span class="n">image</span><span class="o">.</span><span class="na">getSource</span><span class="o">()</span>
        <span class="o">));</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">visitTable</span><span class="o">(</span><span class="nc">TableElement</span> <span class="n">table</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// 헤더 추가</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">table</span><span class="o">.</span><span class="na">getHeaders</span><span class="o">().</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">markdown</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"|"</span><span class="o">);</span>
            <span class="k">for</span> <span class="o">(</span><span class="nc">String</span> <span class="n">header</span> <span class="o">:</span> <span class="n">table</span><span class="o">.</span><span class="na">getHeaders</span><span class="o">())</span> <span class="o">{</span>
                <span class="n">markdown</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">header</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="s">"|"</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">markdown</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"\n|"</span><span class="o">);</span>
            
            <span class="c1">// 구분선 추가</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">table</span><span class="o">.</span><span class="na">getHeaders</span><span class="o">().</span><span class="na">size</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="n">markdown</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"---|"</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">markdown</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"\n"</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="c1">// 데이터 행 추가</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">row</span> <span class="o">:</span> <span class="n">table</span><span class="o">.</span><span class="na">getData</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">markdown</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"|"</span><span class="o">);</span>
            <span class="k">for</span> <span class="o">(</span><span class="nc">String</span> <span class="n">cell</span> <span class="o">:</span> <span class="n">row</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">markdown</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">cell</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="s">"|"</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="n">markdown</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"\n"</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">markdown</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"\n"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getMarkdown</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">markdown</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DocumentConverter</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// 문서 요소 생성</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">DocumentElement</span><span class="o">&gt;</span> <span class="n">document</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
        
        <span class="n">document</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">TextElement</span><span class="o">(</span>
            <span class="s">"안녕하세요, 방문자 패턴 예제입니다."</span><span class="o">,</span>
            <span class="s">"Arial"</span><span class="o">,</span>
            <span class="mi">16</span>
        <span class="o">));</span>

        <span class="n">document</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">ImageElement</span><span class="o">(</span>
            <span class="s">"/images/example.jpg"</span><span class="o">,</span>
            <span class="mi">800</span><span class="o">,</span>
            <span class="mi">600</span><span class="o">,</span>
            <span class="s">"예제 이미지"</span>
        <span class="o">));</span>

        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">headers</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">"이름"</span><span class="o">,</span> <span class="s">"나이"</span><span class="o">,</span> <span class="s">"직업"</span><span class="o">);</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;&gt;</span> <span class="n">data</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span>
            <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">"홍길동"</span><span class="o">,</span> <span class="s">"30"</span><span class="o">,</span> <span class="s">"개발자"</span><span class="o">),</span>
            <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">"김철수"</span><span class="o">,</span> <span class="s">"25"</span><span class="o">,</span> <span class="s">"디자이너"</span><span class="o">)</span>
        <span class="o">);</span>
        <span class="n">document</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="nc">TableElement</span><span class="o">(</span><span class="n">data</span><span class="o">,</span> <span class="n">headers</span><span class="o">,</span> <span class="s">"solid"</span><span class="o">));</span>

        <span class="c1">// HTML 변환</span>
        <span class="nc">HtmlExportVisitor</span> <span class="n">htmlVisitor</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HtmlExportVisitor</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">DocumentElement</span> <span class="n">element</span> <span class="o">:</span> <span class="n">document</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">element</span><span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="n">htmlVisitor</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"HTML 출력:"</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">htmlVisitor</span><span class="o">.</span><span class="na">getHtml</span><span class="o">());</span>

        <span class="c1">// Markdown 변환</span>
        <span class="nc">MarkdownExportVisitor</span> <span class="n">markdownVisitor</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MarkdownExportVisitor</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">DocumentElement</span> <span class="n">element</span> <span class="o">:</span> <span class="n">document</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">element</span><span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="n">markdownVisitor</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"\nMarkdown 출력:"</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">markdownVisitor</span><span class="o">.</span><span class="na">getMarkdown</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><ul><li>Client 코드를 보면 방문자(HtmlExportVisitor, MarkdownExportVisitor)가 방문 공간(DocumentElement)에 순차적으로 들어가고(accept 함수)있고 들어갈때의 책임은 방문자(HtmlExportVisitor, MarkdownExportVisitor)에서 구현된걸 확인할 수 있다.</ul><h1 id="유용한-상황">유용한 상황</h1><p>방문자 패턴이 유용한 케이스는 아래와 같다.</p><h2 id="1-다양한-포맷-지원이-필요할-때">1) 다양한 포맷 지원이 필요할 때</h2><ul><li>문서 변환 (HTML, PDF, Markdown 등)<li>데이터 직렬화 (JSON, XML, YAML 등)</ul><h2 id="2-복잡한-객체-구조에-대한-다양한-처리가-필요할-때">2) 복잡한 객체 구조에 대한 다양한 처리가 필요할 때</h2><ul><li>파일 시스템 탐색<li>AST(Abstract Syntax Tree) 처리</ul><h2 id="3-처리-로직이-자주-변경되거나-확장되는-경우">3) 처리 로직이 자주 변경되거나 확장되는 경우</h2><ul><li>새로운 보고서 형식 추가<li>새로운 계산 방식 도입</ul><h2 id="4-객체의-데이터와-처리를-분리하고-싶을-때">4) 객체의 데이터와 처리를 분리하고 싶을 때</h2><ul><li>데이터 구조는 안정적이지만 처리 방식이 다양한 경우<li>처리 로직을 모듈화하고 싶은 경우</ul><blockquote><p>단, 간단한 객체 구조에서는 오버엔지니어링이 될 수 있습니다.</p></blockquote><h4 id="출처-및-참고">출처 및 참고</h4><ul><li><a href="https://brownbears.tistory.com/575">https://brownbears.tistory.com/575</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/cs/'>CS</a>, <a href='/categories/%EB%94%94%EC%9E%90%EC%9D%B8%ED%8C%A8%ED%84%B4/'>디자인패턴</a>, <a href='/categories/%ED%96%89%EC%9C%84%ED%8C%A8%ED%84%B4/'>행위패턴</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/designpattern/" class="post-tag no-text-decoration" >designpattern</a> <a href="/tags/visitor/" class="post-tag no-text-decoration" >visitor</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[디자인패턴] Visitor 패턴 - Youngho's Devlog&url=https://jeonyoungho.github.io/posts/Visitor%ED%8C%A8%ED%84%B4/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[디자인패턴] Visitor 패턴 - Youngho's Devlog&u=https://jeonyoungho.github.io/posts/Visitor%ED%8C%A8%ED%84%B4/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=[디자인패턴] Visitor 패턴 - Youngho's Devlog&url=https://jeonyoungho.github.io/posts/Visitor%ED%8C%A8%ED%84%B4/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-5958719204143086" data-ad-slot="1982371670" data-ad-format="auto" data-full-width-responsive="true"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script> <ins class="adsbygoogle" style="display:block" data-ad-format="autorelaxed" data-ad-client="ca-pub-5958719204143086" data-ad-slot="5918543412"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script> <script src="https://utteranc.es/client.js" repo="jeonyoungho/jeonyoungho.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async> </script></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Kafka-%EB%A9%94%EC%8B%9C%EC%A7%80-%EC%A0%84%EB%8B%AC-%EB%B3%B4%EC%9E%A5-%EB%B0%A9%EC%8B%9D/">Kafka 메시지 전달 보장 방식</a><li><a href="/posts/Transactional-Outbox-%ED%8C%A8%ED%84%B4/">Transactional Outbox 패턴</a><li><a href="/posts/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EC%9D%B8%EB%8D%B1%EC%8A%A4-%EC%A1%B0%EA%B0%81%ED%99%94/">데이터베이스 인덱스 조각화(Fragmentation)</a><li><a href="/posts/Kafka-DeadLetter-%EA%B4%80%EB%A6%AC/">Kafka DeadLetter 관리</a><li><a href="/posts/Redis-%ED%8A%B9%EC%A7%95/">Redis 특징</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/jpa/">jpa</a> <a class="post-tag" href="/tags/effectivejava/">effectivejava</a> <a class="post-tag" href="/tags/react/">react</a> <a class="post-tag" href="/tags/frontend/">frontend</a> <a class="post-tag" href="/tags/es6/">es6</a> <a class="post-tag" href="/tags/velopert/">velopert</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/poiemaweb/">poiemaweb</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Delegate%ED%8C%A8%ED%84%B4/"><div class="card-body"> <span class="timeago small" > Dec 6, 2022 <i class="unloaded">2022-12-06T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[디자인패턴] Delegate 패턴</h3><div class="text-muted small"><p> 제품 개발을 하면서 ~Delegate 라는 클래스들을 자주 접하게 되었다. 관련해서 찾아보니 Delegate Pattern 이라는 디자인 패턴을 적용한 것이었다. 위 이미지에서 알 수 있다시피 모바일 앱 개발에서 자주 사용되는 패턴인 듯하다. Delegate 패턴이란? Delegate 패턴이란 위임자 패턴이라 불려진다. 쉽게 설명하면 OOP에...</p></div></div></a></div><div class="card"> <a href="/posts/%EC%98%B5%EC%84%9C%EB%B2%84%ED%8C%A8%ED%84%B4/"><div class="card-body"> <span class="timeago small" > Jun 30, 2021 <i class="unloaded">2021-06-30T16:50:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[디자인패턴] 옵서버 패턴(Observer Pattern)</h3><div class="text-muted small"><p> 옵서버 패턴(Observer Pattern) 데이터의 변경이 발생하였을 때 상대 클래스 및 객체에 의존하지 않으면서 데이터 변경을 통보하고자 할 때 옵서버 패턴은 통보 대상 객체의 관리를 Subject 클래스와 Observer 인터페이스로 일반화한다. 그러면 데이터 변경을 통보하는 클래스(ConcreteSubject)는 통보 대상 클래스/객체...</p></div></div></a></div><div class="card"> <a href="/posts/%EC%8A%A4%ED%8A%B8%EB%9E%98%ED%8B%B0%EC%A7%80%ED%8C%A8%ED%84%B4/"><div class="card-body"> <span class="timeago small" > Jun 30, 2021 <i class="unloaded">2021-06-30T16:55:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[디자인패턴] 스트래티지 패턴(Strategy Pattern)</h3><div class="text-muted small"><p> 스트래티지 패턴(Strategy Pattern) 전략을 쉽게 바꿀 수 있도록 해주는 디자인 패턴이다. 여기에서 전략이란 어떤 목적을 달성하기 위해 일을 수행하는 방식, 비즈니스 규칙, 문제를 해결하는 알고리즘 등으로 이해할 수 있다. 프로그램에서 전략을 실행할 때는 쉽게 전략을 바꿔야 할 필요가 있는 경우가 많이 발생한다. 특히 게임 프로그래밍에...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/AWS-TGC-%EB%82%B4%EC%9A%A9-%EC%A0%95%EB%A6%AC/" class="btn btn-outline-primary" prompt="Older"><p>AWS TGC 내용 정리</p></a> <a href="/posts/%EB%A7%8C%EB%93%A4%EB%A9%B4%EC%84%9C-%EB%B0%B0%EC%9A%B0%EB%8A%94-%ED%81%B4%EB%A6%B0%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EB%82%B4%EC%9A%A9-%EC%A0%95%EB%A6%AC/" class="btn btn-outline-primary" prompt="Newer"><p>만들면서 배우는 클린 아키텍처 내용 정리</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/jeonyoungho_o">jeonyoungho</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/jpa/">jpa</a> <a class="post-tag" href="/tags/effectivejava/">effectivejava</a> <a class="post-tag" href="/tags/react/">react</a> <a class="post-tag" href="/tags/frontend/">frontend</a> <a class="post-tag" href="/tags/es6/">es6</a> <a class="post-tag" href="/tags/velopert/">velopert</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/poiemaweb/">poiemaweb</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://jeonyoungho.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
