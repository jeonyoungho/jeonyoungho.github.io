<!DOCTYPE html><html lang="ko" mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="MSA 환경에서의 분산 트랜잭션 관리" /><meta name="author" content="jeonyoungho" /><meta property="og:locale" content="ko" /><meta name="description" content="MSA 환경에서 고민해야되는 포인트는 도메인별로 분산된 DB를 가질때의 트랜잭션 관리다." /><meta property="og:description" content="MSA 환경에서 고민해야되는 포인트는 도메인별로 분산된 DB를 가질때의 트랜잭션 관리다." /><link rel="canonical" href="https://jeonyoungho.github.io/posts/MSA-%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C%EC%9D%98-%EB%B6%84%EC%82%B0-%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98-%EA%B4%80%EB%A6%AC/" /><meta property="og:url" content="https://jeonyoungho.github.io/posts/MSA-%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C%EC%9D%98-%EB%B6%84%EC%82%B0-%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98-%EA%B4%80%EB%A6%AC/" /><meta property="og:site_name" content="Youngho’s Devlog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-04-10T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="MSA 환경에서의 분산 트랜잭션 관리" /><meta name="twitter:site" content="@jeonyoungho_o" /><meta name="twitter:creator" content="@jeonyoungho" /><meta name="google-site-verification" content="eonGeSiIVfF48EnFoJqakC7h2hUzgqxFNJaxkfPiGr0" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"jeonyoungho"},"dateModified":"2025-04-13T21:15:36+09:00","datePublished":"2025-04-10T00:00:00+09:00","description":"MSA 환경에서 고민해야되는 포인트는 도메인별로 분산된 DB를 가질때의 트랜잭션 관리다.","headline":"MSA 환경에서의 분산 트랜잭션 관리","mainEntityOfPage":{"@type":"WebPage","@id":"https://jeonyoungho.github.io/posts/MSA-%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C%EC%9D%98-%EB%B6%84%EC%82%B0-%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98-%EA%B4%80%EB%A6%AC/"},"url":"https://jeonyoungho.github.io/posts/MSA-%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C%EC%9D%98-%EB%B6%84%EC%82%B0-%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98-%EA%B4%80%EB%A6%AC/"}</script><title>MSA 환경에서의 분산 트랜잭션 관리 | Youngho's Devlog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Youngho's Devlog"><meta name="application-name" content="Youngho's Devlog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-RF6ZGDWXV1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-RF6ZGDWXV1'); }); </script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5958719204143086" crossorigin="anonymous"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/youngho_employee_pic.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Youngho's Devlog</a></div><div class="site-subtitle font-italic">curios developer</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/jeonyoungho" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/jeonyoungho_o" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['yhjun1000','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>MSA 환경에서의 분산 트랜잭션 관리</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"> <ins class="adsbygoogle" style="display:block; margin-top: 30px;" data-ad-client="ca-pub-5958719204143086" data-ad-slot="1982371670" data-ad-format="auto" data-full-width-responsive="true"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>MSA 환경에서의 분산 트랜잭션 관리</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> jeonyoungho </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Thu, Apr 10, 2025, 12:00 AM +0900" prep="on" > Apr 10 <i class="unloaded">2025-04-10T00:00:00+09:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sun, Apr 13, 2025, 9:15 PM +0900" prefix="Updated " > Apr 13 <i class="unloaded">2025-04-13T21:15:36+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2697 words">14 min</span></div></div><div class="post-content"><p>MSA 환경에서 고민해야되는 포인트는 도메인별로 분산된 DB를 가질때의 트랜잭션 관리다.</p><p>단일 DB에서 제공하는 트랜잭션을 활용할 수 없다보니 전체적인 데이터 일관성과 무결성을 보장하기 위한 고민이 필요하다.</p><p>이를 해결하기 위한 대표적인 방식인 2PC 프로토콜(2Phase Commit)과 Saga Pattern에 대해 알아보자.</p><h1 id="2pc2phase-commit-프로토콜">2PC(2Phase Commit) 프로토콜</h1><p>MSA 가 대중화 되기 이전에 분산 데이터베이스 환경에서 데이터 일관성을 만족시키기 위해 널리 사용되었던 프로토콜 중 하나다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/posts/MSA/MSA환경에서의분산트랜잭션관리_2PC_구조.png" alt="Image" /></p><p>전체적인 흐름은 중간의 Coorinator가 2단계(준비, 커밋)로 나뉘어 두 노드(DBMS)에 커밋을 진행하는 방식이다.</p><p><strong>1) 준비 단계(prepare phase)</strong></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/posts/MSA/MSA환경에서의분산트랜잭션관리_2PC_준비단계.png" alt="Image" /></p><p>첫 번째, 준비 단계에서는 Coorinator가 모든 노드(DBMS)에 트랜잭션 열어 Lock을 획득후 커밋 가능 여부를 응답한다.</p><p><strong>2) 커밋 단계(commit phase)</strong></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/posts/MSA/MSA환경에서의분산트랜잭션관리_2PC_커밋단계.png" alt="Image" /></p><p>두 번째, 커밋 단계에서는 모든 노드가 준비 완료될 경우 commit 요청을 전송하고, 만약 하나라도 준비 실패한다면 rollback 요청을 보냄으로써 두 노드간의 데이터 일관성을 보장한다.</p><h2 id="2pc-단점">2PC 단점</h2><p><strong>MSA 환경에서는 다음과 같은 단점들로 거의 사용되지 않는다.</strong></p><ul><li>모든 요청을 처리할 때까지 관련된 모든 DB에 Lock이 설정된다. 따라서, 지연 시간(Latency)가 증가할 수 있다.<ul><li>만약 비즈니스가 복잡해져서 관련 DB가 늘어난다면 그에 비례해서 지연 시간이 길어질 수 있다.</ul><li>서비스 간 강결합을 초래한다.<ul><li>MSA 구조를 도입하는 이유는 각 서비스 간의 결합을 줄이고 독립적인 서비스를 구축하기 위함이다.<li>하지만 2PC를 적용하면 Coodinator를 기반으로 서비스 간의 강력한 결합이 생기기 때문에 MSA 구조를 사용하는 의미가 퇴색될 수 있다.<li>만약 코디네이터에 장애가 발생하면…? 전체 트랜잭션이 불확실한 상태에 빠질 수 있다. 코디네이터가 복구될 때까지 참여자들은 Lock을 획득하고 있으므로 대기 상태가 된다.</ul><li>제약사항이 존재한다.<ul><li>사용하는 DBMS가 분산 트랜잭션을 지원해야 사용할 수 있으며, 같은 종류의 DBMS여야 한다.<li>NoSQL 은 지원 X</ul><li>모든 노드가 커밋 혹은 롤백을 완료할 때까지 기다려야 하기 때문에, 네트워크 지연이나 참여자 지연이 있을 경우 성능 저하로 이어질 수 있다.</ul><h1 id="saga-pattern">Saga Pattern</h1><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/posts/MSA/MSA환경에서의분산트랜잭션관리_SAGA_구조.png" alt="Image" /></p><p><strong>MSA 와 같은 분산 환경에서 데이터 일관성을 보장하기 위해 등장한 패턴이다.</strong> 각 서비스는 각각의 데이터베이스로 로컬 트랜잭션을 가지며, 해당 서비스의 데이터를 업데이트후 관련된 메시지 또는 이벤트를 발행하여 다음 단계의 서비스들의 트랜잭션을 수행하는 방법이다. 만약 특정 서비스에서 수행 실패가 발생하면 데이터 정합성을 맞추기 위해 이전 트랜잭션에 대한 보상 트랜잭션이 수행된다. <strong>즉, 2PC와는 다르게 데이터 일관성을 보장하는 주체가 DBMS가 아닌 애플리케이션이다.</strong></p><p>Saga 패턴은 ‘코레오그래피 사가 패턴’과 ‘오케스트레이션 사가 패턴’으로 나뉘어진다.</p><h2 id="코레오그래피-사가-패턴choreography-saga-pattern">코레오그래피 사가 패턴(Choreography Saga Pattern)</h2><p>중앙 제어 없이, 서비스끼리 이벤트 Pub/Sub을 활용해서 통신하는 패턴이다.</p><p>커머스 시스템의 주문 생성 시나리오를 통해 살펴보자.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/posts/MSA/MSA환경에서의분산트랜잭션관리_SAGA_코레오그래피_성공.png" alt="Image" /></p><ul><li>Order 마이크로서비스는 Pending 상태의 주문을 생성한다.<li>Order 마이크로서비스는 주문 생성 이벤트를 발행한다.<li>Stock 마이크로서비스는 주문 생성 이벤트를 컨슘하여 재고를 차감한다.<li>Stock 마이크로서비스는 재고 차감 이벤트를 생성한다.<li>Delivery 마이크로서비스는 재고 차감 이벤트를 컨슘하여 배송을 생성한다.<li>Delivery 마이크로서비스는 배송 생성 이벤트를 발행한다.<li>Order 마이크로서비스는 배송 생성 이벤트를 컨슘하여 Pending 상태의 주문을 승인한다.</ul><p>만약 트랜잭션이 중간에 실패하게 되면 다음과 같은 보상 트랜잭션을 통해 롤백을 처리한다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/posts/MSA/MSA환경에서의분산트랜잭션관리_SAGA_코레오그래피_실패.png" alt="Image" /></p><ul><li>Delivery 마이크로서비스가 배송 생성 도중 실패하게 되면 배송 생성 실패 이벤트를 발행한다.<li>Stock 마이크로서비스는 배송 생성 실패 이벤트를 컨슘하여 차감된 재고를 롤백한다.<li>Stock 마이크로서비스는 차감된 재고 롤백 이벤트를 발행한다.<li>Order 마이크로서비스는 차감된 재고 롤백 이벤트를 컨슘하여 Pending 상태의 주문을 반려한다.</ul><h2 id="오케스트레이션-사가-패턴orchestration-saga-pattern">오케스트레이션 사가 패턴(Orchestration Saga Pattern)</h2><p>중앙의 컨트롤러가 전체 흐름과 보상 작업을 제어하는 패턴이다. 아래 이미지처럼 중앙 오케스트레이터(Manager)가 전체 트랜잭션의 흐름을 관리하고 각 서비스에게 언제 어떤 작업을 해야하는지 명시적으로 명령을 전달하는 구조다.(마치 오케스트라에서 지휘자가 각 연주자들에게 언제 어떻게 연주해야 하는지를 지시하는 것과 유사하다)</p><p>동일하게 커머스 시스템의 주문 생성 시나리오를 통해 살펴보자.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/posts/MSA/MSA환경에서의분산트랜잭션관리_SAGA_오케스트레이션_성공.png" alt="Image" /></p><ul><li>Order 마이크로서비스는 Order Saga Orchester(Manager) 인스턴스를 생성한다.<li>Order Saga Orchester(Manager) 인스턴스는 Pending 상태의 주문을 생성한다.<li>Order Saga Orchester(Manager) 인스턴스는 재고 차감 명령 이벤트를 발행한다.<li>Stock 마이크로서비스는 재고 차감 명령 이벤트를 컨슘하여 재고를 차감한다.<li>Stock 마이크로서비스는 재고 차감 완료 이벤트를 발행한다.<li>Order Saga Orchester(Manager) 인스턴스는 재고 차감 완료 이벤트를 컨슘후 배송 생성 명령 이벤트를 발행한다.(Pending 상태의 주문의 트랜잭션 처리 현황을 갱신할 수도 있다)<li>Delivery 마이크로서비스는 배송 생성 명령 이벤트를 컨슘하여 배송을 생성한다.<li>Delivery 마이크로서비스는 배송 생성 완료 이벤트를 발행한다.<li>Order Saga Orchester(Manager) 인스턴스는 배송 생성 완료 이벤트를 컨슘하여 Pending 상태의 주문을 승인한다.</ul><p>만약 트랜잭션이 중간에 실패하게 되면 다음과 같은 보상 트랜잭션을 통해 롤백을 처리한다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/posts/MSA/MSA환경에서의분산트랜잭션관리_SAGA_오케스트레이션_실패.png" alt="Image" /></p><ul><li>Delivery 마이크로서비스가 배송 생성 도중 실패하게 되면 배송 생성 실패 이벤트를 발행한다.<li>Order Saga Orchester(Manager) 인스턴스는 배송 생성 실패 이벤트를 컨슘후 주문 차감 롤백 명령 이벤트를 발행한다.(Pending 상태의 주문의 트랜잭션 처리 현황을 갱신할 수도 있다)<li>Stock 마이크로서비스는 주문 차감 롤백 명령 이벤트를 컨슘하여 차감된 재고를 롤백한다.<li>Stock 마이크로서비스는 주문 차감 롤백 완료 이벤트를 발행한다.<li>Order Saga Orchester(Manager) 인스턴스는 주문 차감 롤백 완료 이벤트를 컨슘후 Pending 상태의 주문을 반려한다.</ul><blockquote><p><strong>note</strong>: 모든 관리를 해주는 오케스트레이터(Manager)가 존재하니 중앙에서 컨트롤하면서 복잡성이 줄어들고 구현과 테스트가 상대적으로 쉽지만 이를 관리하는 Orchestrator 서비스가 추가되며, 과도하게 많은 비즈니스 로직이 오케스트레이터 안에 들어갈 위험이 있다. 이를 피하기 위해서는 오케스트레이터가 오퍼레이션 순서에 대해서만 책임지고 비지니스 로직을 포함하지 않도록 설계해야한다.</p></blockquote><h2 id="코레오그래피-사가-패턴-vs-오케스트레이션-사가-패턴">코레오그래피 사가 패턴 vs 오케스트레이션 사가 패턴</h2><h3 id="코레오그래피-사가-패턴">코레오그래피 사가 패턴</h3><h4 id="장점">장점</h4><ul><li>참여자(연관된 마이크로서비스)가 적고 중앙제어가 필요 없는 경우에 적합하다.<li>추가 서비스 생성 및 소멸에 간섭이 없어 구성이 간편하고, 역할 분산으로 단일 실패 시점이 존재하지 않는다.</ul><h4 id="단점">단점</h4><ul><li>명령 추적(트랜잭션 상태 파악)이 어렵고 워크플로우 파악이 복잡할 수 있다.<li>Saga 참여자간 순환 종속성 발생 가능성이 존재한다.<li>통합 테스트가 어렵다.</ul><h3 id="오케스트레이션-사가-패턴">오케스트레이션 사가 패턴</h3><h4 id="장점-1">장점</h4><ul><li>참여자(연관된 마이크로서비스)가 많고, 복잡한 워크 플로우에서 적합하며, 프로세스 흐름의 제어가 가능하다.<li>중앙 오케스트레이터로 인해 순환 종속성 발생 우려가 없다.</ul><h4 id="단점-1">단점</h4><ul><li>중앙 통제를 위한 로직이 복잡할 수 있다.<li>모든 워크플로우를 관리하므로 단일 실패지점이 될 우려가 있다.</ul><h2 id="사가-패턴-적용-예제">사가 패턴 적용 예제</h2><p>토스에서 오케스트레이션 사가 패턴을 적용하여 분산 환경에서 데이터 정합성 문제를 해결했던 사례다. 자세한 내용은 아래 영상을 참고하자.</p><ul><li><a href="https://www.youtube.com/watch?v=xpwRTu47fqY">토스ㅣSLASH 24 - 보상 트랜잭션으로 분산 환경에서도 안전하게 환전하기</a></ul><h1 id="reference">Reference</h1><p><strong>2PC</strong></p><ul><li><a href="https://kadensungbincho.tistory.com/125">https://kadensungbincho.tistory.com/125</a><li><a href="https://velog.io/@ouk/2%EB%8B%A8%EA%B3%84-%EC%BB%A4%EB%B0%8B-%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C2PC%EC%9D%B4%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B4%EB%A9%B0-%EC%96%B4%EB%96%BB%EA%B2%8C-%EB%8F%99%EC%9E%91%ED%95%98%EB%82%98%EC%9A%94">https://velog.io/@ouk/2단계-커밋-프로토콜2PC이란-무엇이며-어떻게-동작하나요</a></ul><p><strong>SAGA</strong></p><ul><li><a href="https://velog.io/@hgs-study/saga-1">https://velog.io/@hgs-study/saga-1</a></ul><p><strong>2PC &amp; SAGA</strong></p><ul><li><a href="https://bezzang2.tistory.com/233">https://bezzang2.tistory.com/233</a><li><a href="https://baebalja.tistory.com/622">https://baebalja.tistory.com/622</a><li><a href="https://devk0ng.github.io/2021/07/27/saga_pattern/#2-Phase-Commit">https://devk0ng.github.io/2021/07/27/saga_pattern/#2-Phase-Commit</a><li><a href="https://ksh-coding.tistory.com/143">https://ksh-coding.tistory.com/143</a><li><a href="https://velog.io/@ch200203/MSA-%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C%EC%9D%98-%EB%B6%84%EC%82%B0-%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98-%EA%B4%80%EB%A6%AC2PC-SAGA-%ED%8C%A8%ED%84%B4">https://velog.io/@ch200203/MSA-환경에서의-분산-트랜잭션-관리2PC-SAGA-패턴</a><li><a href="https://haon.blog/article/toss-slash/distribution-transaction">https://haon.blog/article/toss-slash/distribution-transaction</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/backend/'>Backend</a>, <a href='/categories/msa/'>MSA</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/msa/" class="post-tag no-text-decoration" >msa</a> <a href="/tags/2pc/" class="post-tag no-text-decoration" >2pc</a> <a href="/tags/saga/" class="post-tag no-text-decoration" >saga</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=MSA 환경에서의 분산 트랜잭션 관리 - Youngho's Devlog&url=https://jeonyoungho.github.io/posts/MSA-%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C%EC%9D%98-%EB%B6%84%EC%82%B0-%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98-%EA%B4%80%EB%A6%AC/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=MSA 환경에서의 분산 트랜잭션 관리 - Youngho's Devlog&u=https://jeonyoungho.github.io/posts/MSA-%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C%EC%9D%98-%EB%B6%84%EC%82%B0-%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98-%EA%B4%80%EB%A6%AC/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=MSA 환경에서의 분산 트랜잭션 관리 - Youngho's Devlog&url=https://jeonyoungho.github.io/posts/MSA-%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C%EC%9D%98-%EB%B6%84%EC%82%B0-%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98-%EA%B4%80%EB%A6%AC/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-5958719204143086" data-ad-slot="1982371670" data-ad-format="auto" data-full-width-responsive="true"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script> <ins class="adsbygoogle" style="display:block" data-ad-format="autorelaxed" data-ad-client="ca-pub-5958719204143086" data-ad-slot="5918543412"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script> <script src="https://utteranc.es/client.js" repo="jeonyoungho/jeonyoungho.github.io" issue-term="pathname" theme="github-light" crossorigin="anonymous" async> </script></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Kafka-%EB%A9%94%EC%8B%9C%EC%A7%80-%EC%A0%84%EB%8B%AC-%EB%B3%B4%EC%9E%A5-%EB%B0%A9%EC%8B%9D/">Kafka 메시지 전달 보장 방식</a><li><a href="/posts/Transactional-Outbox-%ED%8C%A8%ED%84%B4/">Transactional Outbox 패턴</a><li><a href="/posts/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EC%9D%B8%EB%8D%B1%EC%8A%A4-%EC%A1%B0%EA%B0%81%ED%99%94/">데이터베이스 인덱스 조각화(Fragmentation)</a><li><a href="/posts/Kafka-DeadLetter-%EA%B4%80%EB%A6%AC/">Kafka DeadLetter 관리</a><li><a href="/posts/Redis-%ED%8A%B9%EC%A7%95/">Redis 특징</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/jpa/">jpa</a> <a class="post-tag" href="/tags/effectivejava/">effectivejava</a> <a class="post-tag" href="/tags/react/">react</a> <a class="post-tag" href="/tags/frontend/">frontend</a> <a class="post-tag" href="/tags/es6/">es6</a> <a class="post-tag" href="/tags/velopert/">velopert</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/poiemaweb/">poiemaweb</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/CircuitBreaker-%EA%B0%9C%EC%9A%94-%EB%B0%8F-Resilence4J-%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%9C-%EC%8B%A4%EC%8A%B5/"><div class="card-body"> <span class="timeago small" > Jan 20, 2023 <i class="unloaded">2023-01-20T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>CircuitBreaker 개요 및 Resilence4J 를 활용한 실습</h3><div class="text-muted small"><p> 써킷 브레이커 패턴 써킷 브레이커는 누전 차단기라는 뜻을 가진다. 누전차단기는 전기 회로에서 과부하가 걸리거나 단락으로 인한 피해를 막기 위해 자동으로 회로를 정지시키는 장치이다. MSA 로 구성된 환경에서 여러 마이크로서비스들이 존재하고 내부 internal-api 로 통신을 하게 되어 서비스가 운영된다. 예를 들어, 아래 그림과 같이 Displ...</p></div></div></a></div><div class="card"> <a href="/posts/Kafka-Connect-%EB%9E%80/"><div class="card-body"> <span class="timeago small" > Mar 10, 2023 <i class="unloaded">2023-03-10T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Kafka Connect란</h3><div class="text-muted small"><p> 출처 https://cjw-awdsd.tistory.com/53 https://sihyung92.oopy.io/architecture/cdc https://hoing.io/archives/5285</p></div></div></a></div><div class="card"> <a href="/posts/MSA%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C-Kafka%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%9C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%8F%99%EA%B8%B0%ED%99%94/"><div class="card-body"> <span class="timeago small" > Apr 8, 2023 <i class="unloaded">2023-04-08T14:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[MSA] MSA환경에서 Kafka를 활용한 데이터 동기화</h3><div class="text-muted small"><p> MSA 로 구성된 환경에서 카프카를 활용하여 도메인 이벤트를 기반으로 처리를 할 땐 아래 요소들을 고민해야 한다. 어떤 방식으로 데이터를 주고 받을 것인지? (Full-Payload 방식 or Zero-Payload 방식) 토픽을 어떻게 나눌 것인지?(도메인 이벤트를 기준으로 나눌 것인지 or 도메인 기준으로 나눌 것인지) 위 두 가지 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/JPA-Batch-Insert%EC%9D%98-%EC%82%AC%EC%8B%A4%EA%B3%BC-%EC%98%A4%ED%95%B4/" class="btn btn-outline-primary" prompt="Older"><p>Spring Data JPA Batch Insert의 사실과 오해</p></a> <a href="/posts/Redis-%EB%8F%99%EC%9E%91-%EC%9B%90%EB%A6%AC/" class="btn btn-outline-primary" prompt="Newer"><p>Redis 동작 원리</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/jeonyoungho_o">jeonyoungho</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/jpa/">jpa</a> <a class="post-tag" href="/tags/effectivejava/">effectivejava</a> <a class="post-tag" href="/tags/react/">react</a> <a class="post-tag" href="/tags/frontend/">frontend</a> <a class="post-tag" href="/tags/es6/">es6</a> <a class="post-tag" href="/tags/velopert/">velopert</a> <a class="post-tag" href="/tags/javascript/">javascript</a> <a class="post-tag" href="/tags/poiemaweb/">poiemaweb</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://jeonyoungho.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
